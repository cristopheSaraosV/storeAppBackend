(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{NFwV:function(t,e,s){"use strict";s.r(e),s.d(e,"StoreModule",function(){return es});var a=s("ofXK"),r=s("3Pt+"),c=s("YOmw"),i=s("PSD3"),n=s.n(i),o=s("fXoL"),l=s("LRne"),b=s("VRyK"),d=s("HDdC"),u=s("GyhO"),h=s("IzEk"),p=s("w1tV"),g=s("lJxs"),m=s("Kqap"),f=s("BFxc"),y=s("xbPD"),v=s("mCNh");function R(t,e,s){return 0===s?[e]:(t.push(e),t)}var A=s("eIep");class Q{}let w=(()=>{class t extends Q{getTranslation(t){return Object(l.a)({})}}return t.\u0275fac=function(e){return L(e||t)},t.\u0275prov=o.Hb({token:t,factory:t.\u0275fac}),t})();const L=o.Tb(w);class S{}let P=(()=>{class t{handle(t){return t.key}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=o.Hb({token:t,factory:t.\u0275fac}),t})();class C{}let k=(()=>{class t extends C{compile(t,e){return t}compileTranslations(t,e){return t}}return t.\u0275fac=function(e){return I(e||t)},t.\u0275prov=o.Hb({token:t,factory:t.\u0275fac}),t})();const I=o.Tb(k);function x(t,e){if(t===e)return!0;if(null===t||null===e)return!1;if(t!=t&&e!=e)return!0;let s,a,r,c=typeof t;if(c==typeof e&&"object"==c){if(!Array.isArray(t)){if(Array.isArray(e))return!1;for(a in r=Object.create(null),t){if(!x(t[a],e[a]))return!1;r[a]=!0}for(a in e)if(!(a in r)&&void 0!==e[a])return!1;return!0}if(!Array.isArray(e))return!1;if((s=t.length)==e.length){for(a=0;a<s;a++)if(!x(t[a],e[a]))return!1;return!0}}return!1}function T(t){return null!=t}function M(t){return t&&"object"==typeof t&&!Array.isArray(t)}function O(t,e){let s=Object.assign({},t);return M(t)&&M(e)&&Object.keys(e).forEach(a=>{M(e[a])?a in t?s[a]=O(t[a],e[a]):Object.assign(s,{[a]:e[a]}):Object.assign(s,{[a]:e[a]})}),s}class D{}let F=(()=>{class t extends D{constructor(){super(...arguments),this.templateMatcher=/{{\s?([^{}\s]*)\s?}}/g}interpolate(t,e){let s;return s="string"==typeof t?this.interpolateString(t,e):"function"==typeof t?this.interpolateFunction(t,e):t,s}getValue(t,e){let s=e.split(".");e="";do{e+=s.shift(),!T(t)||!T(t[e])||"object"!=typeof t[e]&&s.length?s.length?e+=".":t=void 0:(t=t[e],e="")}while(s.length);return t}interpolateFunction(t,e){return t(e)}interpolateString(t,e){return e?t.replace(this.templateMatcher,(t,s)=>{let a=this.getValue(e,s);return T(a)?a:t}):t}}return t.\u0275fac=function(e){return U(e||t)},t.\u0275prov=o.Hb({token:t,factory:t.\u0275fac}),t})();const U=o.Tb(F);class N{constructor(){this.currentLang=this.defaultLang,this.translations={},this.langs=[],this.onTranslationChange=new o.n,this.onLangChange=new o.n,this.onDefaultLangChange=new o.n}}const $=new o.r("USE_STORE"),_=new o.r("USE_DEFAULT_LANG");let B=(()=>{class t{constructor(t,e,s,a,r,c=!0,i=!1){this.store=t,this.currentLoader=e,this.compiler=s,this.parser=a,this.missingTranslationHandler=r,this.useDefaultLang=c,this.isolate=i,this.pending=!1,this._onTranslationChange=new o.n,this._onLangChange=new o.n,this._onDefaultLangChange=new o.n,this._langs=[],this._translations={},this._translationRequests={}}get onTranslationChange(){return this.isolate?this._onTranslationChange:this.store.onTranslationChange}get onLangChange(){return this.isolate?this._onLangChange:this.store.onLangChange}get onDefaultLangChange(){return this.isolate?this._onDefaultLangChange:this.store.onDefaultLangChange}get defaultLang(){return this.isolate?this._defaultLang:this.store.defaultLang}set defaultLang(t){this.isolate?this._defaultLang=t:this.store.defaultLang=t}get currentLang(){return this.isolate?this._currentLang:this.store.currentLang}set currentLang(t){this.isolate?this._currentLang=t:this.store.currentLang=t}get langs(){return this.isolate?this._langs:this.store.langs}set langs(t){this.isolate?this._langs=t:this.store.langs=t}get translations(){return this.isolate?this._translations:this.store.translations}set translations(t){this.isolate?this._translations=t:this.store.translations=t}setDefaultLang(t){if(t===this.defaultLang)return;let e=this.retrieveTranslations(t);void 0!==e?(this.defaultLang||(this.defaultLang=t),e.pipe(Object(h.a)(1)).subscribe(e=>{this.changeDefaultLang(t)})):this.changeDefaultLang(t)}getDefaultLang(){return this.defaultLang}use(t){if(t===this.currentLang)return Object(l.a)(this.translations[t]);let e=this.retrieveTranslations(t);return void 0!==e?(this.currentLang||(this.currentLang=t),e.pipe(Object(h.a)(1)).subscribe(e=>{this.changeLang(t)}),e):(this.changeLang(t),Object(l.a)(this.translations[t]))}retrieveTranslations(t){let e;return void 0===this.translations[t]&&(this._translationRequests[t]=this._translationRequests[t]||this.getTranslation(t),e=this._translationRequests[t]),e}getTranslation(t){this.pending=!0;const e=this.currentLoader.getTranslation(t).pipe(Object(p.a)());return this.loadingTranslations=e.pipe(Object(h.a)(1),Object(g.a)(e=>this.compiler.compileTranslations(e,t)),Object(p.a)()),this.loadingTranslations.subscribe(e=>{this.translations[t]=e,this.updateLangs(),this.pending=!1},t=>{this.pending=!1}),e}setTranslation(t,e,s=!1){e=this.compiler.compileTranslations(e,t),this.translations[t]=s&&this.translations[t]?O(this.translations[t],e):e,this.updateLangs(),this.onTranslationChange.emit({lang:t,translations:this.translations[t]})}getLangs(){return this.langs}addLangs(t){t.forEach(t=>{-1===this.langs.indexOf(t)&&this.langs.push(t)})}updateLangs(){this.addLangs(Object.keys(this.translations))}getParsedResult(t,e,s){let a;if(e instanceof Array){let a={},r=!1;for(let c of e)a[c]=this.getParsedResult(t,c,s),"function"==typeof a[c].subscribe&&(r=!0);if(r){let t;for(let s of e){let e="function"==typeof a[s].subscribe?a[s]:Object(l.a)(a[s]);t=void 0===t?e:Object(b.a)(t,e)}return t.pipe(function(t,e){return arguments.length>=2?function(s){return Object(v.a)(Object(m.a)(t,e),Object(f.a)(1),Object(y.a)(e))(s)}:function(e){return Object(v.a)(Object(m.a)((e,s,a)=>t(e,s,a+1)),Object(f.a)(1))(e)}}(R,[]),Object(g.a)(t=>{let s={};return t.forEach((t,a)=>{s[e[a]]=t}),s}))}return a}if(t&&(a=this.parser.interpolate(this.parser.getValue(t,e),s)),void 0===a&&this.defaultLang&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(a=this.parser.interpolate(this.parser.getValue(this.translations[this.defaultLang],e),s)),void 0===a){let t={key:e,translateService:this};void 0!==s&&(t.interpolateParams=s),a=this.missingTranslationHandler.handle(t)}return void 0!==a?a:e}get(t,e){if(!T(t)||!t.length)throw new Error('Parameter "key" required');if(this.pending)return d.a.create(s=>{let a=t=>{s.next(t),s.complete()},r=t=>{s.error(t)};this.loadingTranslations.subscribe(s=>{"function"==typeof(s=this.getParsedResult(s,t,e)).subscribe?s.subscribe(a,r):a(s)},r)});{let s=this.getParsedResult(this.translations[this.currentLang],t,e);return"function"==typeof s.subscribe?s:Object(l.a)(s)}}stream(t,e){if(!T(t)||!t.length)throw new Error('Parameter "key" required');return Object(u.a)(this.get(t,e),this.onLangChange.pipe(Object(A.a)(s=>{const a=this.getParsedResult(s.translations,t,e);return"function"==typeof a.subscribe?a:Object(l.a)(a)})))}instant(t,e){if(!T(t)||!t.length)throw new Error('Parameter "key" required');let s=this.getParsedResult(this.translations[this.currentLang],t,e);if(void 0!==s.subscribe){if(t instanceof Array){let e={};return t.forEach((s,a)=>{e[t[a]]=t[a]}),e}return t}return s}set(t,e,s=this.currentLang){this.translations[s][t]=this.compiler.compile(e,s),this.updateLangs(),this.onTranslationChange.emit({lang:s,translations:this.translations[s]})}changeLang(t){this.currentLang=t,this.onLangChange.emit({lang:t,translations:this.translations[t]}),this.defaultLang||this.changeDefaultLang(t)}changeDefaultLang(t){this.defaultLang=t,this.onDefaultLangChange.emit({lang:t,translations:this.translations[t]})}reloadLang(t){return this.resetLang(t),this.getTranslation(t)}resetLang(t){this._translationRequests[t]=void 0,this.translations[t]=void 0}getBrowserLang(){if("undefined"==typeof window||void 0===window.navigator)return;let t=window.navigator.languages?window.navigator.languages[0]:null;return t=t||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,-1!==t.indexOf("-")&&(t=t.split("-")[0]),-1!==t.indexOf("_")&&(t=t.split("_")[0]),t}getBrowserCultureLang(){if("undefined"==typeof window||void 0===window.navigator)return;let t=window.navigator.languages?window.navigator.languages[0]:null;return t=t||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,t}}return t.\u0275fac=function(e){return new(e||t)(o.Vb(N),o.Vb(Q),o.Vb(C),o.Vb(D),o.Vb(S),o.Vb(_),o.Vb($))},t.\u0275prov=o.Hb({token:t,factory:t.\u0275fac}),t})(),z=(()=>{class t{constructor(t,e){this.translate=t,this._ref=e,this.value=""}updateValue(t,e,s){let a=e=>{this.value=void 0!==e?e:t,this.lastKey=t,this._ref.markForCheck()};if(s){let r=this.translate.getParsedResult(s,t,e);"function"==typeof r.subscribe?r.subscribe(a):a(r)}this.translate.get(t,e).subscribe(a)}transform(t,...e){if(!t||0===t.length)return t;if(x(t,this.lastKey)&&x(e,this.lastParams))return this.value;let s;if(T(e[0])&&e.length)if("string"==typeof e[0]&&e[0].length){let t=e[0].replace(/(\')?([a-zA-Z0-9_]+)(\')?(\s)?:/g,'"$2":').replace(/:(\s)?(\')(.*?)(\')/g,':"$3"');try{s=JSON.parse(t)}catch(a){throw new SyntaxError(`Wrong parameter in TranslatePipe. Expected a valid Object, received: ${e[0]}`)}}else"object"!=typeof e[0]||Array.isArray(e[0])||(s=e[0]);return this.lastKey=t,this.lastParams=e,this.updateValue(t,s),this._dispose(),this.onTranslationChange||(this.onTranslationChange=this.translate.onTranslationChange.subscribe(e=>{this.lastKey&&e.lang===this.translate.currentLang&&(this.lastKey=null,this.updateValue(t,s,e.translations))})),this.onLangChange||(this.onLangChange=this.translate.onLangChange.subscribe(e=>{this.lastKey&&(this.lastKey=null,this.updateValue(t,s,e.translations))})),this.onDefaultLangChange||(this.onDefaultLangChange=this.translate.onDefaultLangChange.subscribe(()=>{this.lastKey&&(this.lastKey=null,this.updateValue(t,s))})),this.value}_dispose(){void 0!==this.onTranslationChange&&(this.onTranslationChange.unsubscribe(),this.onTranslationChange=void 0),void 0!==this.onLangChange&&(this.onLangChange.unsubscribe(),this.onLangChange=void 0),void 0!==this.onDefaultLangChange&&(this.onDefaultLangChange.unsubscribe(),this.onDefaultLangChange=void 0)}ngOnDestroy(){this._dispose()}}return t.\u0275fac=function(e){return new(e||t)(o.Lb(B),o.Xb())},t.\u0275pipe=o.Kb({name:"translate",type:t,pure:!1}),t.\u0275prov=o.Hb({token:t,factory:t.\u0275fac}),t})(),j=(()=>{class t{static forRoot(e={}){return{ngModule:t,providers:[e.loader||{provide:Q,useClass:w},e.compiler||{provide:C,useClass:k},e.parser||{provide:D,useClass:F},e.missingTranslationHandler||{provide:S,useClass:P},N,{provide:$,useValue:e.isolate},{provide:_,useValue:e.useDefaultLang},B]}}static forChild(e={}){return{ngModule:t,providers:[e.loader||{provide:Q,useClass:w},e.compiler||{provide:C,useClass:k},e.parser||{provide:D,useClass:F},e.missingTranslationHandler||{provide:S,useClass:P},{provide:$,useValue:e.isolate},{provide:_,useValue:e.useDefaultLang},B]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.Jb({type:t}),t.\u0275inj=o.Ib({}),t})();var E=s("AytR"),Y=s("tk/3");let V=(()=>{class t{constructor(t){this.http=t,this._jsonURL="assets/json",this.getColorsTheme=t=>this.http.get(`${this._jsonURL}/${t}`),this._urlBase=E.a.URLBASE,this.getSetting=()=>this.http.get(`${this._urlBase}/settings/sales`),this.updateSetting=t=>this.http.put(`${this._urlBase}/settings/sales`,{marginsale:t}),this.getThemeStadistic=()=>{}}}return t.\u0275fac=function(e){return new(e||t)(o.Vb(Y.b))},t.\u0275prov=o.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var q=s("QIUk");let H=(()=>{class t{constructor(t,e){this.translate=t,this.settingService=e,this.themeLink=document.querySelector("#theme"),this.activeLang="es",this.getLang()}ngOnInit(){this.marginsale={saleHight:0,saleLow:0,productHight:0},this.getSetting()}getSetting(){this.getAllSettings$=this.settingService.getSetting().subscribe(t=>{t&&(this.marginsale=t)})}getLang(){const t=localStorage.getItem("lang");this.translate.setDefaultLang(t||this.activeLang)}selectTheme(t){var e;const s=`./assets/Css/Themes/${t}.css`;localStorage.setItem("theme",s),null===(e=this.themeLink)||void 0===e||e.setAttribute("href",s),this.showToast("The change is saved","","success")}selectLanguage(t){this.activeLang=t,this.translate.use(t),localStorage.setItem("lang",t)}saveMarginSale(){this.settingService.updateSetting(this.marginsale).subscribe(t=>{t.msg?this.showToast("Error",t.msg,"warning"):(this.showToast("Success","","success"),this.marginsale=t)})}showToast(t,e,s,a=2e3){n.a.fire(t,e,s),setInterval(()=>{n.a.close()},a)}}return t.\u0275fac=function(e){return new(e||t)(o.Lb(B),o.Lb(V))},t.\u0275cmp=o.Fb({type:t,selectors:[["app-settings"]],decls:81,vars:66,consts:[["styleClass","p-card-shadow text-lg-start text-sm-center mb-4",3,"header","subheader"],[1,"row"],[1,"col-12","mb-4"],[1,"card"],[1,"card-body"],[1,"text-secondary","mb-3"],["role","group","aria-label","Basic mixed styles example",1,"btn-group"],["type","button",1,"btn","btn-lux","mx-1","mb-2","mb-md-0","mt-3",3,"click"],["type","button",1,"btn","btn-flatly","mx-1","mb-2","mb-md-0","mt-3",3,"click"],["type","button",1,"btn","btn-pulse","mx-1","mb-2","mb-md-0","mt-3",3,"click"],[1,"col-12","col-md-6","col-md-4","mb-4"],[1,"text-muted"],[1,"input-group","mb-3"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["type","button","id","button-addon2",1,"btn","btn-outline-secondary",3,"click"],[1,"col-12","col-md-6","col-lg-4","mb-4"]],template:function(t,e){1&t&&(o.Mb(0,"p-card",0),o.bc(1,"translate"),o.bc(2,"translate"),o.Rb(3,"div",1),o.Rb(4,"div",2),o.Rb(5,"div",3),o.Rb(6,"div",4),o.Rb(7,"h4"),o.yc(8),o.bc(9,"translate"),o.Qb(),o.Rb(10,"p",5),o.yc(11),o.bc(12,"translate"),o.Qb(),o.Rb(13,"div",6),o.Rb(14,"button",7),o.Yb("click",function(){return e.selectTheme("lux")}),o.yc(15,"LUX"),o.Qb(),o.Rb(16,"button",8),o.Yb("click",function(){return e.selectTheme("flatly")}),o.yc(17,"Flatly"),o.Qb(),o.Rb(18,"button",9),o.Yb("click",function(){return e.selectTheme("pulse")}),o.yc(19,"Pulse"),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Rb(20,"div",10),o.Rb(21,"div",3),o.Rb(22,"div",4),o.Rb(23,"h4"),o.yc(24),o.bc(25,"translate"),o.Qb(),o.Rb(26,"p",5),o.yc(27),o.bc(28,"translate"),o.Qb(),o.Rb(29,"span",11),o.yc(30),o.bc(31,"translate"),o.Qb(),o.Rb(32,"div",12),o.Rb(33,"input",13),o.Yb("ngModelChange",function(t){return e.marginsale.saleLow=t}),o.bc(34,"translate"),o.Qb(),o.Rb(35,"button",14),o.Yb("click",function(){return e.saveMarginSale()}),o.yc(36),o.bc(37,"translate"),o.Qb(),o.Qb(),o.Rb(38,"span",11),o.yc(39),o.bc(40,"translate"),o.Qb(),o.Rb(41,"div",12),o.Rb(42,"input",13),o.Yb("ngModelChange",function(t){return e.marginsale.saleHight=t}),o.bc(43,"translate"),o.Qb(),o.Rb(44,"button",14),o.Yb("click",function(){return e.saveMarginSale()}),o.yc(45),o.bc(46,"translate"),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Rb(47,"div",10),o.Rb(48,"div",3),o.Rb(49,"div",4),o.Rb(50,"h4"),o.yc(51),o.bc(52,"translate"),o.Qb(),o.Rb(53,"p",5),o.yc(54),o.bc(55,"translate"),o.Qb(),o.Rb(56,"span",11),o.yc(57),o.bc(58,"translate"),o.Qb(),o.Rb(59,"div",12),o.Rb(60,"input",13),o.Yb("ngModelChange",function(t){return e.marginsale.productHight=t}),o.bc(61,"translate"),o.Qb(),o.Rb(62,"button",14),o.Yb("click",function(){return e.saveMarginSale()}),o.yc(63),o.bc(64,"translate"),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Rb(65,"div",15),o.Rb(66,"div",3),o.Rb(67,"div",4),o.Rb(68,"h4"),o.yc(69),o.bc(70,"translate"),o.Qb(),o.Rb(71,"p",5),o.yc(72),o.bc(73,"translate"),o.Qb(),o.Rb(74,"div",6),o.Rb(75,"button",9),o.Yb("click",function(){return e.selectLanguage("es")}),o.yc(76),o.bc(77,"translate"),o.Qb(),o.Rb(78,"button",8),o.Yb("click",function(){return e.selectLanguage("en")}),o.yc(79),o.bc(80,"translate"),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb()),2&t&&(o.hc("header",o.cc(1,24,"setting.title"))("subheader",o.cc(2,26,"setting.description")),o.Ab(8),o.zc(o.cc(9,28,"setting.changeTheme-title")),o.Ab(3),o.zc(o.cc(12,30,"setting.changeTheme-description")),o.Ab(13),o.zc(o.cc(25,32,"setting.sale-title")),o.Ab(3),o.zc(o.cc(28,34,"setting.sale-description")),o.Ab(3),o.zc(o.cc(31,36,"saleLowTitleSpan")),o.Ab(3),o.hc("placeholder",o.cc(34,38,"saleLowTitle"))("ngModel",e.marginsale.saleLow),o.Ab(3),o.zc(o.cc(37,40,"save")),o.Ab(3),o.zc(o.cc(40,42,"saleHightTitleSpan")),o.Ab(3),o.hc("placeholder",o.cc(43,44,"saleHightTitle"))("ngModel",e.marginsale.saleHight),o.Ab(3),o.zc(o.cc(46,46,"save")),o.Ab(6),o.zc(o.cc(52,48,"table.product")),o.Ab(3),o.zc(o.cc(55,50,"setting.product-description")),o.Ab(3),o.zc(o.cc(58,52,"productHightTitleSpan")),o.Ab(3),o.hc("placeholder",o.cc(61,54,"productHightTitle"))("ngModel",e.marginsale.productHight),o.Ab(3),o.zc(o.cc(64,56,"save")),o.Ab(6),o.zc(o.cc(70,58,"setting.lang-title")),o.Ab(3),o.zc(o.cc(73,60,"setting.lang-description")),o.Ab(4),o.zc(o.cc(77,62,"setting.spanish")),o.Ab(3),o.zc(o.cc(80,64,"setting.english")))},directives:[q.a,r.a,r.g,r.i],pipes:[z],styles:[".btn-theme1[_ngcontent-%COMP%]{background-color:#1a3154;color:#fff}.btn-theme2[_ngcontent-%COMP%]{background-color:#35858b;color:#fff}.btn-theme3[_ngcontent-%COMP%]{background-color:#2e0b71;color:#fff}.btn-theme4[_ngcontent-%COMP%]{background-color:#ffc721;color:#fff}"]}),t})();var K=s("tyNb"),W=s("lGQG");let G=(()=>{class t{constructor(t,e){this.authService=t,this.router=e}canActivate(){return this.authService.validateTokenByRole("ADMIN_ROLE")||n.a.fire("You do not have administrator permission","","error"),this.authService.validateTokenByRole("ADMIN_ROLE")}canLoad(){return this.authService.validateTokenByRole("ADMIN_ROLE")}}return t.\u0275fac=function(e){return new(e||t)(o.Vb(W.a),o.Vb(K.b))},t.\u0275prov=o.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),J=(()=>{class t{constructor(t){this.http=t,this._urlBase=E.a.URLBASE,this.getListCategories=()=>[{name:"Grocery"},{name:"Dairy products"}]}getAllCategories(){return this.http.get(`${this._urlBase}/category`)}getNameCategory(t){return this.http.get(`${this._urlBase}/${t}`)}saveCategory(t){return this.http.post(`${this._urlBase}/category`,{name:t})}updateCategory(t,e){return this.http.put(`${this._urlBase}/category/${t}`,{name:e})}deleteCategory(t){return this.http.delete(`${this._urlBase}/category/${t.uid}`)}}return t.\u0275fac=function(e){return new(e||t)(o.Vb(Y.b))},t.\u0275prov=o.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function X(t,e){1&t&&(o.Pb(0),o.Rb(1,"h5",17),o.yc(2),o.bc(3,"translate"),o.Qb(),o.Ob()),2&t&&(o.Ab(2),o.Ac(" ",o.cc(3,1,"modalCategoryNew")," "))}function Z(t,e){1&t&&(o.Rb(0,"h5",17),o.yc(1),o.bc(2,"translate"),o.Qb()),2&t&&(o.Ab(1),o.Ac(" ",o.cc(2,1,"modalCategoryUpdate")," "))}function tt(t,e){1&t&&(o.Rb(0,"span",18),o.yc(1),o.bc(2,"translate"),o.Qb()),2&t&&(o.Ab(1),o.Ac(" ",o.cc(2,1,"modalCategoryFieldIsValidName")," "))}let et=(()=>{class t{constructor(t,e,s){this.fb=t,this.categoryService=e,this.translate=s,this.activeLang="es",this.categoryWasSaved=!1,this.categoryNew=new o.n,this.categoryUpdate=new o.n,this.getLang()}getLang(){const t=localStorage.getItem("lang");this.translate.setDefaultLang(t||this.activeLang)}ngOnChanges(t){var e,s;void 0!==this.myFormCategory&&(this.myFormCategory.controls.name.setValue(null===(e=this.categoryInput)||void 0===e?void 0:e.name),this.myFormCategory.controls._id.setValue(null===(s=this.categoryInput)||void 0===s?void 0:s.uid))}ngOnInit(){this.myFormCategory=this.fb.group({name:["",r.o.required],_id:[""]})}saveCategory(){this.categoryService.saveCategory(this.myFormCategory.controls.name.value).subscribe(t=>{this.categoryWasSaved=!0,this.showToast("Success","Saved correctly","success"),this.Restoreform(),this.categoryNew.emit(t.category)},t=>{this.Restoreform(),this.showToast("Oh! there was a problem",t,"error")})}updateCategory(){this.categoryService.updateCategory(this.myFormCategory.controls._id.value,this.myFormCategory.controls.name.value).subscribe(t=>{this.Restoreform(),this.categoryWasSaved=!0,this.showToast("Saved correctly","","success"),n.a.fire("Success","Saved correctly","success"),this.categoryUpdate.emit(t.category)},t=>{this.Restoreform(),this.showToast("Oh! there was a problem",t,"error")})}fieldIsValid(t){return this.myFormCategory.controls[t].errors&&this.myFormCategory.controls[t].touched}Restoreform(){setTimeout(()=>{this.categoryWasSaved=!1,this.myFormCategory.reset(),this.categoryInput={name:"",uid:""}},100)}showToast(t,e,s,a=2e3){n.a.fire(t,e,s),setInterval(()=>{n.a.close()},a)}}return t.\u0275fac=function(e){return new(e||t)(o.Lb(r.b),o.Lb(J),o.Lb(B))},t.\u0275cmp=o.Fb({type:t,selectors:[["app-category-features"]],inputs:{categoryInput:"categoryInput",isNewCategory:"isNewCategory"},outputs:{categoryNew:"categoryNew",categoryUpdate:"categoryUpdate"},features:[o.yb],decls:25,vars:18,consts:[["id","modalCategory","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[4,"ngIf","ngIfElse"],["notIsNewCategory",""],[3,"formGroup","ngSubmit"],[1,"modal-body"],[1,"input-group","mb-3"],[1,"input-group-text"],["type","text","aria-label","name","formControlName","name","aria-describedby","basic-addon1",1,"form-control",3,"placeholder"],["class","input-group alert alert-danger mb-3",4,"ngIf"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger",3,"click"],[1,"pi","me-2","pi-times"],["type","submit","data-bs-dismiss","modal",1,"btn","btn-primary","float-end",3,"disabled","hidden"],[1,"pi","me-2","pi-save"],["id","staticBackdropLabel",1,"modal-title"],[1,"input-group","alert","alert-danger","mb-3"]],template:function(t,e){if(1&t&&(o.Rb(0,"div",0),o.Rb(1,"div",1),o.Rb(2,"div",2),o.Rb(3,"div",3),o.wc(4,X,4,3,"ng-container",4),o.wc(5,Z,3,3,"ng-template",null,5,o.xc),o.Qb(),o.Rb(7,"form",6),o.Yb("ngSubmit",function(){return 1==e.isNewCategory?e.saveCategory():e.updateCategory()}),o.Rb(8,"div",7),o.Rb(9,"div",8),o.Rb(10,"span",9),o.yc(11),o.bc(12,"translate"),o.Qb(),o.Mb(13,"input",10),o.bc(14,"translate"),o.Qb(),o.wc(15,tt,3,3,"span",11),o.Qb(),o.Rb(16,"div",12),o.Rb(17,"button",13),o.Yb("click",function(){return e.Restoreform()}),o.Mb(18,"i",14),o.yc(19),o.bc(20,"translate"),o.Qb(),o.Rb(21,"button",15),o.Mb(22,"i",16),o.yc(23),o.bc(24,"translate"),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb()),2&t){const t=o.rc(6);o.Ab(4),o.hc("ngIf",1==e.isNewCategory)("ngIfElse",t),o.Ab(3),o.hc("formGroup",e.myFormCategory),o.Ab(4),o.zc(o.cc(12,10,"table.name")),o.Ab(2),o.hc("placeholder",o.cc(14,12,"table.name")),o.Ab(2),o.hc("ngIf",e.fieldIsValid("name")),o.Ab(4),o.Ac(" ",o.cc(20,14,"btnClose")," "),o.Ab(2),o.hc("disabled",e.myFormCategory.invalid)("hidden",e.categoryWasSaved),o.Ab(2),o.Ac(" ",o.cc(24,16,"btnSaveCategory")," ")}},directives:[a.l,r.p,r.h,r.d,r.a,r.g,r.c],pipes:[z],styles:[".form-control[_ngcontent-%COMP%]:focus {\n\t\t\t\tborder-color: #ffca2b !important;\n\t\t\t\tbox-shadow: 0 0 0 0.2rem rgb(255, 202, 43, 0.25) !important;\n\t\t\t}"]}),t})(),st=(()=>{class t{constructor(t,e){this.categoryService=t,this.translate=e,this.activeLang="es",this.categoryDelete=new o.n,this.eliminatedCategory=!1,this.getLang()}getLang(){const t=localStorage.getItem("lang");this.translate.setDefaultLang(t||this.activeLang)}deleteCategory(t){this.deleteCategory$=this.categoryService.deleteCategory(t).subscribe(t=>{var e;1==t.status?(this.eliminatedCategory=!0,this.showToast("Success","Will be deleted correctly","success"),this.categoryDelete.emit(t.category),this.deleteCategory$.unsubscribe()):this.showToast("Can not be eliminated",`There are ${null===(e=t.categorySelected)||void 0===e?void 0:e.length} products with this category`,"error",2e3)},t=>{this.showToast("Oh! there was a problem",t,"error")})}activateButtonAgain(){setTimeout(()=>{this.eliminatedCategory=!1},500)}showToast(t,e,s,a=2e3){n.a.fire(t,e,s),setInterval(()=>{n.a.close()},a)}}return t.\u0275fac=function(e){return new(e||t)(o.Lb(J),o.Lb(B))},t.\u0275cmp=o.Fb({type:t,selectors:[["app-modal-delete-category"]],inputs:{categorySelected:"categorySelected"},outputs:{categoryDelete:"categoryDelete"},decls:20,vars:12,consts:[["id","modalDeteteCategory","tabindex","-1","aria-labelledby","modalDeleteProduct","aria-hidden","true","data-bs-backdrop","static",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","modalNewProduct",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"mb-3"],[1,"col-sm-12","mt-3"],["type","button","label","Back","data-bs-dismiss","modal",1,"btn","btn-danger",3,"click"],[1,"pi","me-2","pi-times"],["type","button","data-bs-dismiss","modal",1,"btn","btn-primary","float-end",3,"disabled","hidden","click"],[1,"pi","me-2","pi-trash"]],template:function(t,e){1&t&&(o.Rb(0,"div",0),o.Rb(1,"div",1),o.Rb(2,"div",2),o.Rb(3,"div",3),o.Rb(4,"h5",4),o.yc(5),o.bc(6,"translate"),o.Qb(),o.Mb(7,"button",5),o.Qb(),o.Rb(8,"div",6),o.Rb(9,"h3",7),o.yc(10),o.Qb(),o.Rb(11,"div",8),o.Rb(12,"button",9),o.Yb("click",function(){return e.activateButtonAgain()}),o.Mb(13,"i",10),o.yc(14),o.bc(15,"translate"),o.Qb(),o.Rb(16,"button",11),o.Yb("click",function(){return e.deleteCategory(e.categorySelected)}),o.Mb(17,"i",12),o.yc(18),o.bc(19,"translate"),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb()),2&t&&(o.Ab(5),o.zc(o.cc(6,6,"modalDelete.title")),o.Ab(5),o.zc(e.categorySelected.name),o.Ab(4),o.Ac(" ",o.cc(15,8,"modalDelete.back")," "),o.Ab(2),o.hc("disabled",e.eliminatedCategory)("hidden",e.eliminatedCategory),o.Ab(2),o.Ac(" ",o.cc(19,10,"modalDelete.title")," "))},pipes:[z],encapsulation:2}),t})();function at(t,e){1&t&&(o.Rb(0,"div",7),o.Rb(1,"strong"),o.yc(2),o.bc(3,"translate"),o.Qb(),o.Mb(4,"div",8),o.Qb()),2&t&&(o.Ab(2),o.zc(o.cc(3,1,"loading")))}function rt(t,e){if(1&t){const t=o.Sb();o.Rb(0,"tr"),o.Rb(1,"th",13),o.yc(2),o.Qb(),o.Rb(3,"td"),o.yc(4),o.Qb(),o.Rb(5,"td"),o.Rb(6,"div",14),o.Rb(7,"button",15),o.Yb("click",function(){o.sc(t);const s=e.$implicit;return o.ac(2).goToProductByCategory(s)}),o.Mb(8,"i",16),o.yc(9),o.bc(10,"translate"),o.Qb(),o.Rb(11,"button",17),o.Yb("click",function(){o.sc(t);const s=e.$implicit;return o.ac(2).selectCategory(!1,s)}),o.Mb(12,"i",18),o.yc(13),o.bc(14,"translate"),o.Qb(),o.Rb(15,"button",19),o.Yb("click",function(){o.sc(t);const s=e.$implicit;return o.ac(2).selectCategory(!1,s)}),o.Mb(16,"i",20),o.yc(17),o.bc(18,"translate"),o.Qb(),o.Qb(),o.Qb(),o.Qb()}if(2&t){const t=e.$implicit,s=e.index;o.Ab(2),o.zc(s+1),o.Ab(2),o.zc(t.name),o.Ab(5),o.Ac(" ",o.cc(10,5,"table.viewProduct")," "),o.Ab(4),o.Ac(" ",o.cc(14,7,"table.edit")," "),o.Ab(4),o.Ac(" ",o.cc(18,9,"table.delete")," ")}}function ct(t,e){if(1&t&&(o.Rb(0,"div",9),o.Rb(1,"table",10),o.Rb(2,"thead"),o.Rb(3,"tr"),o.Rb(4,"th",11),o.yc(5,"#"),o.Qb(),o.Rb(6,"th",11),o.yc(7),o.bc(8,"translate"),o.Qb(),o.Rb(9,"th",11),o.yc(10),o.bc(11,"translate"),o.Qb(),o.Qb(),o.Qb(),o.Rb(12,"tbody"),o.wc(13,rt,19,11,"tr",12),o.Qb(),o.Qb(),o.Qb()),2&t){const t=o.ac();o.Ab(7),o.zc(o.cc(8,3,"table.name")),o.Ab(3),o.zc(o.cc(11,5,"table.actions")),o.Ab(3),o.hc("ngForOf",t.listCategories)}}function it(t,e){1&t&&(o.Rb(0,"div",22),o.yc(1," No categories were found! "),o.Qb())}function nt(t,e){if(1&t&&o.wc(0,it,2,0,"div",21),2&t){const t=o.ac();o.hc("ngIf",0==t.showLoading)}}let ot=(()=>{class t{constructor(t,e,s){this.categoriesService=t,this.router=e,this.translate=s,this.activeLang="es",this.listCategories=[],this.categorySelected={name:"Abarrates"},this.isNewCategory=!0,this.showLoading=!0,this.getLang()}ngOnDestroy(){this.getAllCategories$.unsubscribe()}getLang(){const t=localStorage.getItem("lang");this.translate.setDefaultLang(t||this.activeLang)}ngOnInit(){this.showLoading=!0,this.getAllCategories$=this.categoriesService.getAllCategories().subscribe(t=>{this.listCategories=t.categories,this.showLoading=!1},t=>{this.showLoading=!1,this.showToast("Oh! there was a problem",t,"error")})}selectCategory(t,e){void 0!==e?this.categorySelected=e:(this.isNewCategory=t,this.categorySelected={name:"",uid:""}),this.isNewCategory=t}addToTheList(t){this.listCategories.push(t)}updateToTheList(t){const e=this.listCategories.findIndex(e=>e.uid==t.uid);let s=[...this.listCategories];s[e]=Object.assign(Object.assign({},s[e]),{name:t.name,uid:t.uid}),this.listCategories=s}deleteToTheList(t){this.listCategories=this.listCategories.filter(e=>e.uid!==t.uid)}goToProductByCategory(t){this.router.navigate(["/store/products"],{queryParams:{categoryid:t.uid}})}showToast(t,e,s,a=2e3){n.a.fire(t,e,s),setInterval(()=>{n.a.close()},a)}}return t.\u0275fac=function(e){return new(e||t)(o.Lb(J),o.Lb(K.b),o.Lb(B))},t.\u0275cmp=o.Fb({type:t,selectors:[["app-list-categories"]],decls:10,vars:9,consts:[["class","d-flex align-items-center p-3",4,"ngIf"],["label","New category","data-bs-target","#modalCategory","data-bs-toggle","modal",1,"mb-4","btn","btn-primary",3,"click"],[1,"pi","me-2","pi-plus"],["class","table-responsive",4,"ngIf","ngIfElse"],["messageThereAreNoCategories",""],[3,"categoryInput","isNewCategory","categoryNew","categoryUpdate"],[3,"categorySelected","categoryDelete"],[1,"d-flex","align-items-center","p-3"],["role","status","aria-hidden","true",1,"spinner-border","ms-auto","text-secondary"],[1,"table-responsive"],[1,"table","table-sm"],["scope","col"],[4,"ngFor","ngForOf"],["scope","row"],[1,"d-grid","gap-3","d-md-block"],[1,"btn","btn-primary","mx-md-1","mb-2","mb-sm-2","mx-sm-2","mx-2","me-sm-4",3,"click"],[1,"pi","me-2","pi-eye"],["data-bs-target","#modalCategory","data-bs-toggle","modal",1,"btn","btn-secondary","mx-md-1","mb-2","mb-sm-2","mx-sm-2","mx-2","me-sm-4",3,"click"],[1,"pi","me-2","pi-pencil"],["data-bs-target","#modalDeteteCategory","data-bs-toggle","modal",1,"btn","btn-danger","mx-md-1","mb-2","mb-sm-2","mx-sm-2","mx-2","me-sm-4",3,"click"],[1,"pi","me-2","pi-trash"],["class","alert alert-danger","role","alert",4,"ngIf"],["role","alert",1,"alert","alert-danger"]],template:function(t,e){if(1&t&&(o.wc(0,at,5,3,"div",0),o.Rb(1,"button",1),o.Yb("click",function(){return e.selectCategory(!0)}),o.Mb(2,"i",2),o.yc(3),o.bc(4,"translate"),o.Qb(),o.wc(5,ct,14,7,"div",3),o.wc(6,nt,1,1,"ng-template",null,4,o.xc),o.Rb(8,"app-category-features",5),o.Yb("categoryNew",function(t){return e.addToTheList(t)})("categoryUpdate",function(t){return e.updateToTheList(t)}),o.Qb(),o.Rb(9,"app-modal-delete-category",6),o.Yb("categoryDelete",function(t){return e.deleteToTheList(t)}),o.Qb()),2&t){const t=o.rc(7);o.hc("ngIf",e.showLoading),o.Ab(3),o.Ac(" ",o.cc(4,7,"buttonNewCategory.title"),"\n"),o.Ab(2),o.hc("ngIf",0!==e.listCategories.length)("ngIfElse",t),o.Ab(3),o.hc("categoryInput",e.categorySelected)("isNewCategory",e.isNewCategory),o.Ab(1),o.hc("categorySelected",e.categorySelected)}},directives:[a.l,et,st,a.k],pipes:[z],encapsulation:2}),t})(),lt=(()=>{class t{constructor(t){this.translate=t,this.activeLang="es",this.getLang()}getLang(){const t=localStorage.getItem("lang");this.translate.setDefaultLang(t||this.activeLang)}}return t.\u0275fac=function(e){return new(e||t)(o.Lb(B))},t.\u0275cmp=o.Fb({type:t,selectors:[["app-category"]],decls:10,vars:9,consts:[[1,"row","justify-content-lg-center"],[1,"col-12","col-sm-12","col-md-12","col-lg-12","col-xl-12","mb-4"],["styleClass","p-card-shadow text-lg-start text-sm-center",3,"header","subheader"],[1,"col-12","col-sm-12","col-md-12","col-lg-12","col-xl-12"]],template:function(t,e){1&t&&(o.Rb(0,"div",0),o.Rb(1,"div",1),o.Rb(2,"p-card",2),o.bc(3,"translate"),o.bc(4,"translate"),o.Rb(5,"p"),o.yc(6),o.bc(7,"translate"),o.Qb(),o.Qb(),o.Qb(),o.Rb(8,"div",3),o.Mb(9,"app-list-categories"),o.Qb(),o.Qb()),2&t&&(o.Ab(2),o.hc("header",o.cc(3,3,"categoryPage.title"))("subheader",o.cc(4,5,"categoryPage.subTitle")),o.Ab(4),o.Ac(" ",o.cc(7,7,"categoryPage.description")," "))},directives:[q.a,ot],pipes:[z],encapsulation:2}),t})(),bt=(()=>{class t{transform(t){switch(t){case"ADMIN_ROLE":return"ADMIN";case"EMPLOYEE_ROLE":return"EMPLOYEE";default:return""}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=o.Kb({name:"rol",type:t,pure:!0}),t})();function dt(t,e){if(1&t&&(o.Rb(0,"li",7),o.Rb(1,"button",16),o.Mb(2,"i"),o.Rb(3,"span",15),o.yc(4),o.bc(5,"translate"),o.Qb(),o.Qb(),o.Qb()),2&t){const t=e.$implicit;o.Ab(1),o.Cb("Logout"!==t.label?"nav-link align-middle px-0 text-white":"nav-link align-middle px-0 bg-danger text-white px-3 mt-4"),o.hc("routerLink",t.routerLink),o.Ab(1),o.Cb(t.icon),o.Ab(2),o.zc(o.cc(5,6,t.label||""))}}let ut=(()=>{class t{constructor(t,e){this.authService=t,this.router=e,this.items=[{label:"Home",icon:"pi pi-fw pi-home",routerLink:"/store/home",routerLinkActiveOptions:"active"},{label:"Products",icon:"pi pi-fw pi-book",routerLink:"/store/products",routerLinkActiveOptions:"active"},{label:"Categories",icon:"pi pi-fw pi-list",routerLink:"/store/categories",routerLinkActiveOptions:"active"},{label:"Sales",icon:"pi pi-fw pi-shopping-cart",routerLink:"/store/sales/history",routerLinkActiveOptions:"active"},{label:"User",icon:"pi pi-fw pi-users",routerLink:"/store/users/listUser",routerLinkActiveOptions:"active"},{label:"Settings",icon:"pi pi-fw pi-cog",routerLink:"/store/settings",routerLinkActiveOptions:"active"}]}get user(){return this.authService.user}logout(){this.authService.logout(),this.router.navigateByUrl("/auth")}}return t.\u0275fac=function(e){return new(e||t)(o.Lb(W.a),o.Lb(K.b))},t.\u0275cmp=o.Fb({type:t,selectors:[["app-menu-store"]],decls:28,vars:9,consts:[[1,"d-flex","flex-column","align-items-center","align-items-sm-start","px-3","pt-2","text-white","min-vh-100"],["href","/",1,"d-flex","align-items-center","pb-3","mb-md-0","me-md-auto","text-white","text-decoration-none"],[1,"fs-5","d-none","d-sm-inline","mt-2"],[1,"ms-2","text-secondary"],["id","menu",1,"nav","nav-pills","flex-column","mb-sm-auto","mb-0","align-items-center","align-items-sm-start"],["class","nav-item",4,"ngFor","ngForOf"],[1,"rounded-pill","text-light","mt-5","mb-2"],[1,"nav-item"],[1,"nav-link","align-middle","px-0","text-light"],[1,"pi","pi-user"],[1,"ms-1","d-none","d-sm-inline","text-light"],[1,"nav-link","align-middle","px-0","text-light","mt-1"],[1,"pi","pi-envelope"],[1,"nav-link","align-middle","px-0","bg-danger","text-white","px-3","mt-4",3,"click"],[1,"pi","pi-fw","pi-sign-out"],[1,"ms-1","d-none","d-sm-inline"],["routerLinkActive"," bg-menu px-4",3,"routerLink"]],template:function(t,e){1&t&&(o.Rb(0,"div",0),o.Rb(1,"a",1),o.Rb(2,"span",2),o.yc(3,"MySTORE"),o.Rb(4,"small",3),o.yc(5,"1.0"),o.Qb(),o.Qb(),o.Qb(),o.Rb(6,"ul",4),o.wc(7,dt,6,8,"li",5),o.Rb(8,"h5",6),o.yc(9),o.bc(10,"rol"),o.Qb(),o.Rb(11,"li",7),o.Rb(12,"a",8),o.Mb(13,"i",9),o.Rb(14,"span",10),o.yc(15),o.Qb(),o.Qb(),o.Qb(),o.Rb(16,"li",7),o.Rb(17,"a",11),o.Mb(18,"i",12),o.Rb(19,"span",10),o.yc(20),o.Qb(),o.Qb(),o.Qb(),o.Rb(21,"li",7),o.Rb(22,"a",13),o.Yb("click",function(){return e.logout()}),o.Mb(23,"i",14),o.Rb(24,"span",15),o.yc(25),o.bc(26,"translate"),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Mb(27,"hr"),o.Qb()),2&t&&(o.Ab(7),o.hc("ngForOf",e.items),o.Ab(2),o.zc(o.cc(10,5,e.user.rol)),o.Ab(6),o.Ac(" ",e.user.name," "),o.Ab(5),o.zc(e.user.email),o.Ab(5),o.zc(o.cc(26,7,"logout")))},directives:[a.k,K.d,K.c],pipes:[bt,z],styles:[".border-radius[_ngcontent-%COMP%] {\n\t\t\t\tborder-radius: 10px;\n\t\t\t}"]}),t})(),ht=(()=>{class t{constructor(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Fb({type:t,selectors:[["app-pages"]],decls:5,vars:0,consts:[[1,"container-fluid"],[1,"row","flex-nowrap"],[1,"col-auto","col-md-3","col-xl-2","px-sm-2","px-0","bg-primary"],[1,"col","py-3"]],template:function(t,e){1&t&&(o.Rb(0,"div",0),o.Rb(1,"div",1),o.Mb(2,"app-menu-store",2),o.Rb(3,"div",3),o.Mb(4,"router-outlet"),o.Qb(),o.Qb(),o.Qb())},directives:[ut,K.f],encapsulation:2}),t})();var pt=s("7zfz");let gt=(()=>{class t{constructor(t){this.http=t,this._urlBase=E.a.URLBASE}getAllProducts(t=0){return this.http.get(`${this._urlBase}/products?from=${t}`)}getAllProductsWithStock(t=0){return this.http.get(`${this._urlBase}/products?from=${t}`).pipe(Object(g.a)(t=>{const e=t.products.filter(t=>t.stock>0);return t.products=e,t}))}getAllProductsWithStockSales(){return this.http.get(`${this._urlBase}/products/sales`).pipe(Object(g.a)(t=>{const e=t.products.filter(t=>t.stock>0);return t.products=e,t}))}getProductById(t,e){return this.http.get(0!==(null==t?void 0:t.length)?`${this._urlBase}/products/search?product=${t}`:`${this._urlBase}/products/search?category=${e}`)}saveNewProduct(t){return this.http.post(`${this._urlBase}/products`,t)}updateProduct(t,e){return this.http.put(`${this._urlBase}/products/${e}`,t)}deleteProduct(t){return this.http.delete(`${this._urlBase}/products/${t._id}`)}productsUnderStock(){return this.http.get(`${this._urlBase}/products/under_stock`)}}return t.\u0275fac=function(e){return new(e||t)(o.Vb(Y.b))},t.\u0275prov=o.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var mt=s("Gxio");function ft(t,e){if(1&t&&(o.Rb(0,"option",20),o.yc(1),o.Qb()),2&t){const t=e.$implicit;o.hc("value",t.uid),o.Ab(1),o.zc(t.name)}}function yt(t,e){if(1&t&&(o.Rb(0,"option",20),o.yc(1),o.Qb()),2&t){const t=e.$implicit;o.hc("value",t.uid),o.Ab(1),o.zc(t.name)}}let vt=(()=>{class t{constructor(t,e,s,a){this.fb=t,this.productService=e,this.categoryService=s,this.translate=a,this.activeLang="es",this.categoryList=[],this.productSearch=new o.n,this.getLang()}ngOnDestroy(){this.getAllCategories$.unsubscribe()}getLang(){const t=localStorage.getItem("lang");this.translate.setDefaultLang(t||this.activeLang)}ngOnInit(){this.searchForm=this.fb.group({product:["",r.o.required],category:["",r.o.required]}),this.getAllCategories$=this.categoryService.getAllCategories().subscribe(t=>{this.categoryList=t.categories},t=>{this.showToast("Oh! there was a problem",t,"error")})}searchProduct(){const t=this.searchForm.controls.product.value,e=this.searchForm.controls.category.value;this.getProductById$=t.length>=1?this.productService.getProductById(t).subscribe(t=>{this.productSearch.emit(t),this.searchForm.controls.category.reset(""),this.getProductById$.unsubscribe()},()=>{this.showToast("Error","Contact technical support","error")}):this.productService.getProductById("",e).subscribe(t=>{this.productSearch.emit(t),this.searchForm.controls.category.reset(""),this.searchForm.controls.product.reset(""),0===t.length?this.showToast("Ups!","No result for search","info",1e3):this.showToast("Success","it was filtered by category name","success",1e3),this.getProductById$.unsubscribe()},t=>{this.showToast("Oh! there was a problem",t,"error")})}getAllProducts(){this.searchForm.controls.product.reset(),this.getAllProducts$=this.productService.getAllProducts().subscribe(t=>{this.productSearch.emit(t.products),this.getAllProducts$.unsubscribe()},t=>{this.showToast("Oh! there was a problem",t,"error")})}showToast(t,e,s,a=2e3){n.a.fire(t,e,s),setInterval(()=>{n.a.close()},a)}}return t.\u0275fac=function(e){return new(e||t)(o.Lb(r.b),o.Lb(gt),o.Lb(J),o.Lb(B))},t.\u0275cmp=o.Fb({type:t,selectors:[["app-search"]],outputs:{productSearch:"productSearch"},decls:64,vars:37,consts:[[1,"mt-2"],[1,"mb-5",3,"formGroup","ngSubmit","keyup"],[1,"d-none","d-lg-block"],[1,"row"],[1,"col-md-6"],[1,"input-group"],["type","search","aria-label","Search","aria-describedby","search-addon","formControlName","product",1,"form-control","rounded",3,"placeholder"],["type","submit",1,"btn","btn-outline-dark",3,"disabled"],[1,"pi","me-2","pi-search"],["type","button",1,"btn","btn-outline-danger",3,"click"],[1,"pi","me-2","pi-times"],["type","search","formControlName","category",1,"form-select","rounded"],[3,"value",4,"ngFor","ngForOf"],[1,"d-block","d-lg-none"],[1,"row","mb-3"],[1,"col-sm-12"],[1,"row","mb-1"],["role","group",1,"btn-group"],[1,"d-grid","gap-2","d-block","float-end","mb-1","mb-md-0"],[1,"input-group","mt-3"],[3,"value"]],template:function(t,e){1&t&&(o.Rb(0,"div",0),o.Rb(1,"form",1),o.Yb("ngSubmit",function(){return e.searchProduct()})("keyup",function(){return e.searchProduct()}),o.Rb(2,"div",2),o.Rb(3,"div",3),o.Rb(4,"div",4),o.Rb(5,"div",5),o.Mb(6,"input",6),o.bc(7,"translate"),o.Rb(8,"button",7),o.Mb(9,"i",8),o.yc(10),o.bc(11,"translate"),o.Qb(),o.Rb(12,"button",9),o.Yb("click",function(){return e.getAllProducts()}),o.Mb(13,"i",10),o.yc(14),o.bc(15,"translate"),o.Qb(),o.Qb(),o.Qb(),o.Rb(16,"div",4),o.Rb(17,"div",5),o.Rb(18,"select",11),o.wc(19,ft,2,2,"option",12),o.Qb(),o.Rb(20,"button",7),o.Mb(21,"i",8),o.yc(22),o.bc(23,"translate"),o.Qb(),o.Rb(24,"button",9),o.Yb("click",function(){return e.getAllProducts()}),o.Mb(25,"i",10),o.yc(26),o.bc(27,"translate"),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Rb(28,"div",13),o.Rb(29,"div",14),o.Rb(30,"div",15),o.Mb(31,"input",6),o.bc(32,"translate"),o.Qb(),o.Qb(),o.Rb(33,"div",16),o.Rb(34,"div",17),o.Rb(35,"button",7),o.Mb(36,"i",8),o.yc(37),o.bc(38,"translate"),o.Qb(),o.Rb(39,"button",9),o.Yb("click",function(){return e.getAllProducts()}),o.Mb(40,"i",10),o.yc(41),o.bc(42,"translate"),o.Qb(),o.Qb(),o.Rb(43,"div",18),o.Mb(44,"div",15),o.Qb(),o.Qb(),o.Qb(),o.Rb(45,"div",13),o.Rb(46,"div",14),o.Rb(47,"div",15),o.Rb(48,"div",19),o.Rb(49,"select",11),o.wc(50,yt,2,2,"option",12),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Rb(51,"div",16),o.Rb(52,"div",17),o.Rb(53,"button",7),o.Mb(54,"i",8),o.yc(55),o.bc(56,"translate"),o.Qb(),o.Rb(57,"button",9),o.Yb("click",function(){return e.getAllProducts()}),o.Mb(58,"i",10),o.yc(59),o.bc(60,"translate"),o.Qb(),o.Qb(),o.Rb(61,"div",18),o.Mb(62,"div",15),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Mb(63,"p-toast")),2&t&&(o.Ab(1),o.hc("formGroup",e.searchForm),o.Ab(5),o.hc("placeholder",o.cc(7,17,"searchProduct.placeholder")),o.Ab(2),o.hc("disabled",e.searchForm.controls.product.invalid),o.Ab(2),o.Ac(" ",o.cc(11,19,"searchProduct.titleSearch")," "),o.Ab(4),o.Ac(" ",o.cc(15,21,"searchProduct.titleClear")," "),o.Ab(5),o.hc("ngForOf",e.categoryList),o.Ab(1),o.hc("disabled",e.searchForm.controls.category.invalid),o.Ab(2),o.Ac(" ",o.cc(23,23,"searchProduct.titleSearch")," "),o.Ab(4),o.Ac(" ",o.cc(27,25,"searchProduct.titleClear")," "),o.Ab(5),o.hc("placeholder",o.cc(32,27,"searchProduct.placeholder")),o.Ab(4),o.hc("disabled",e.searchForm.controls.product.invalid),o.Ab(2),o.Ac(" ",o.cc(38,29,"searchProduct.titleSearch")," "),o.Ab(4),o.Ac(" ",o.cc(42,31,"searchProduct.titleClear")," "),o.Ab(9),o.hc("ngForOf",e.categoryList),o.Ab(3),o.hc("disabled",e.searchForm.controls.category.invalid),o.Ab(2),o.Ac(" ",o.cc(56,33,"searchProduct.titleSearch")," "),o.Ab(4),o.Ac(" ",o.cc(60,35,"searchProduct.titleClear")," "))},directives:[r.p,r.h,r.d,r.a,r.g,r.c,r.n,a.k,mt.a,r.j,r.q],pipes:[z],encapsulation:2}),t})();var Rt=s("jhN1");function At(t,e){1&t&&(o.Pb(0),o.Rb(1,"h5",27),o.yc(2),o.bc(3,"translate"),o.Qb(),o.Ob()),2&t&&(o.Ab(2),o.Ac(" ",o.cc(3,1,"modalProductNew")," "))}function Qt(t,e){1&t&&(o.Rb(0,"h5",27),o.yc(1),o.bc(2,"translate"),o.Qb()),2&t&&(o.Ab(1),o.Ac(" ",o.cc(2,1,"modalProductUpdate")," "))}function wt(t,e){1&t&&(o.Rb(0,"span",28),o.yc(1),o.bc(2,"translate"),o.Qb()),2&t&&(o.Ab(1),o.Ac(" ",o.cc(2,1,"alertName")," "))}function Lt(t,e){1&t&&(o.Rb(0,"span",28),o.yc(1),o.bc(2,"translate"),o.Qb()),2&t&&(o.Ab(1),o.Ac(" ",o.cc(2,1,"alertDescription")," "))}function St(t,e){1&t&&(o.Rb(0,"span",28),o.yc(1),o.bc(2,"translate"),o.Qb()),2&t&&(o.Ab(1),o.Ac(" ",o.cc(2,1,"alertimg")," "))}function Pt(t,e){1&t&&(o.Rb(0,"span",28),o.yc(1),o.bc(2,"translate"),o.Qb()),2&t&&(o.Ab(1),o.Ac(" ",o.cc(2,1,"alertPrice")," "))}function Ct(t,e){1&t&&(o.Rb(0,"span",28),o.yc(1),o.bc(2,"translate"),o.Qb()),2&t&&(o.Ab(1),o.Ac(" ",o.cc(2,1,"alertStock")," "))}function kt(t,e){if(1&t&&(o.Rb(0,"option",29),o.yc(1),o.Qb()),2&t){const t=e.$implicit;o.hc("value",t.uid)("selected",t.uid),o.Ab(1),o.zc(t.name)}}function It(t,e){1&t&&(o.Rb(0,"span",28),o.yc(1),o.bc(2,"translate"),o.Qb()),2&t&&(o.Ab(1),o.Ac(" ",o.cc(2,1,"alertCategory")," "))}let xt=(()=>{class t{constructor(t,e,s,a,r){this.fb=t,this.productService=e,this.categoryService=s,this.sanitizer=a,this.translate=r,this.productNew=new o.n,this.productUpdate=new o.n,this.listCategories=[{name:"default"}],this.productWasSaved=!1,this.showLoading=!1,this.activeLang="es",this.files=[],this.getLang()}ngOnDestroy(){this.getAllCategories$.unsubscribe()}getLang(){const t=localStorage.getItem("lang");this.translate.setDefaultLang(t||this.activeLang)}ngOnChanges(t){var e,s,a,r,c,i,n;1==this.isNewProduct&&this.Restoreform(),void 0!==this.myFormProduct&&(this.myFormProduct.controls._id.setValue(null===(e=this.productInput)||void 0===e?void 0:e._id),this.myFormProduct.controls.name.setValue(null===(s=this.productInput)||void 0===s?void 0:s.name),this.myFormProduct.controls.description.setValue(null===(a=this.productInput)||void 0===a?void 0:a.description),this.myFormProduct.controls.img.setValue(null===(r=this.productInput)||void 0===r?void 0:r.img),this.myFormProduct.controls.category.setValue(null===(c=this.productInput)||void 0===c?void 0:c.category),this.myFormProduct.controls.price.setValue(null===(i=this.productInput)||void 0===i?void 0:i.price),this.myFormProduct.controls.stock.setValue(null===(n=this.productInput)||void 0===n?void 0:n.stock))}ngOnInit(){this.myFormProduct=this.fb.group({_id:[this.productInput._id],name:[this.productInput.name,r.o.required],img:[this.productInput.img,r.o.required],description:[this.productInput.description,r.o.required],price:[this.productInput.price,r.o.required],stock:[this.productInput.stock,r.o.required],category:[this.productInput.category,r.o.required]}),this.getAllCategories$=this.categoryService.getAllCategories().subscribe(t=>{this.listCategories=t.categories})}fieldIsValid(t){return this.myFormProduct.controls[t].errors&&this.myFormProduct.controls[t].touched}clearForm(){this.myFormProduct.reset()}saveProduct(){try{this.showLoading=!0;const t=new FormData;t.append("category",this.myFormProduct.controls.category.value),t.append("description",this.myFormProduct.controls.description.value),t.append("img",this.myFormProduct.controls.img.value),t.append("name",this.myFormProduct.controls.name.value),t.append("price",this.myFormProduct.controls.price.value),t.append("stock",this.myFormProduct.controls.stock.value),t.append("_id",this.myFormProduct.controls._id.value),this.saveNewProduct$=this.productService.saveNewProduct(t).subscribe(t=>{this.showToast("Success","Saved correctly","success"),this.productWasSaved=!0,this.productNew.emit(t.product),this.showLoading=!1,this.Restoreform(),this.saveNewProduct$.unsubscribe()},t=>{this.showLoading=!1,this.showToast("Oh! there was a problem",t,"error"),this.Restoreform(),setInterval(()=>{n.a.close()},2e3)})}catch(t){console.log(t)}}updateProduct(){const t=new FormData;t.append("category",this.myFormProduct.controls.category.value),t.append("description",this.myFormProduct.controls.description.value),t.append("img",this.myFormProduct.controls.img.value),t.append("name",this.myFormProduct.controls.name.value),t.append("price",this.myFormProduct.controls.price.value),t.append("stock",this.myFormProduct.controls.stock.value),t.append("_id",this.myFormProduct.controls._id.value),this.updateProduct$=this.productService.updateProduct(t,this.myFormProduct.controls._id.value).subscribe(t=>{this.showToast("Success","Saved correctly","success"),this.productUpdate.emit(t.product),this.Restoreform(),this.updateProduct$.unsubscribe()},t=>{this.showToast("Oh! there was a problem",t,"error")})}Restoreform(){void 0!==this.myFormProduct&&this.myFormProduct.reset(),this.productInput={category:"",description:"",name:"",price:0,stock:1}}showToast(t,e,s,a=2e3){n.a.fire(t,e,s),setInterval(()=>{n.a.close()},a)}}return t.\u0275fac=function(e){return new(e||t)(o.Lb(r.b),o.Lb(gt),o.Lb(J),o.Lb(Rt.b),o.Lb(B))},t.\u0275cmp=o.Fb({type:t,selectors:[["app-product-add-and-update"]],inputs:{productInput:"productInput",isNewProduct:"isNewProduct"},outputs:{productNew:"productNew",productUpdate:"productUpdate"},features:[o.yb],decls:63,vars:39,consts:[["id","modalProduct","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header","mb-3"],[4,"ngIf","ngIfElse"],["updateProductContainer",""],[3,"formGroup","ngSubmit"],[1,"modal-body"],[1,"input-group","mb-3"],[1,"input-group-text"],["type","text","aria-label","name","formControlName","name","aria-describedby","basic-addon1","required","",1,"form-control",3,"placeholder"],["class","input-group alert alert-danger mb-3",4,"ngIf"],["aria-label","description","formControlName","description","required","",1,"form-control"],["type","url","aria-label","imgProduct","formControlName","img","aria-describedby","basic-addon1","required","",1,"form-control"],["type","number","formControlName","price","aria-label","price","required","",1,"form-control"],["type","number","formControlName","stock","required","",1,"form-control"],["formControlName","category","aria-label","Default select example","required","",1,"form-select"],[3,"value","selected",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger",3,"click"],[1,"pi","me-2","pi-times"],["type","submit","data-bs-dismiss","modal",1,"btn","btn-primary","float-end",3,"disabled"],[1,"pi","me-2","pi-save"],[1,"text-center","mt-5","mb-5",3,"hidden"],[1,"mb-3"],["role","status",1,"spinner-border","text-secondary"],[1,"visually-hidden"],["id","staticBackdropLabel",1,"modal-title"],[1,"input-group","alert","alert-danger","mb-3"],[3,"value","selected"]],template:function(t,e){if(1&t&&(o.Rb(0,"div",0),o.Rb(1,"div",1),o.Rb(2,"div",2),o.Rb(3,"div",3),o.wc(4,At,4,3,"ng-container",4),o.wc(5,Qt,3,3,"ng-template",null,5,o.xc),o.Qb(),o.Rb(7,"form",6),o.Yb("ngSubmit",function(){return 1==e.isNewProduct?e.saveProduct():e.updateProduct()}),o.Rb(8,"div",7),o.Rb(9,"div",8),o.Rb(10,"span",9),o.yc(11),o.bc(12,"translate"),o.Qb(),o.Mb(13,"input",10),o.bc(14,"translate"),o.Qb(),o.wc(15,wt,3,3,"span",11),o.Rb(16,"div",8),o.Rb(17,"span",9),o.yc(18),o.bc(19,"translate"),o.Qb(),o.Mb(20,"textarea",12),o.Qb(),o.wc(21,Lt,3,3,"span",11),o.Rb(22,"div",8),o.Rb(23,"span",9),o.yc(24),o.bc(25,"translate"),o.Qb(),o.Mb(26,"input",13),o.Qb(),o.wc(27,St,3,3,"span",11),o.Rb(28,"div",8),o.Rb(29,"span",9),o.yc(30),o.bc(31,"translate"),o.Qb(),o.Mb(32,"input",14),o.Qb(),o.wc(33,Pt,3,3,"span",11),o.Rb(34,"div",8),o.Rb(35,"span",9),o.yc(36),o.bc(37,"translate"),o.Qb(),o.Mb(38,"input",15),o.Qb(),o.wc(39,Ct,3,3,"span",11),o.Rb(40,"div",8),o.Rb(41,"span",9),o.yc(42),o.bc(43,"translate"),o.Qb(),o.Rb(44,"select",16),o.wc(45,kt,2,3,"option",17),o.Qb(),o.Qb(),o.wc(46,It,3,3,"span",11),o.Qb(),o.Rb(47,"div",18),o.Rb(48,"button",19),o.Yb("click",function(){return e.Restoreform()}),o.Mb(49,"i",20),o.yc(50),o.bc(51,"translate"),o.Qb(),o.Rb(52,"button",21),o.Mb(53,"i",22),o.yc(54),o.bc(55,"translate"),o.Qb(),o.Qb(),o.Rb(56,"div",23),o.Rb(57,"h3",24),o.yc(58,"Loading..."),o.Qb(),o.Rb(59,"div",25),o.Rb(60,"span",26),o.yc(61,"Loading..."),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Mb(62,"p-toast")),2&t){const t=o.rc(6);o.Ab(4),o.hc("ngIf",e.isNewProduct)("ngIfElse",t),o.Ab(3),o.hc("formGroup",e.myFormProduct),o.Ab(4),o.Ac("* ",o.cc(12,21,"labelName"),""),o.Ab(2),o.hc("placeholder",o.cc(14,23,"Name")),o.Ab(2),o.hc("ngIf",e.fieldIsValid("name")),o.Ab(3),o.Ac("* ",o.cc(19,25,"labelDescription"),""),o.Ab(3),o.hc("ngIf",e.fieldIsValid("description")),o.Ab(3),o.Ac("* ",o.cc(25,27,"labelImg"),""),o.Ab(3),o.hc("ngIf",e.fieldIsValid("img")),o.Ab(3),o.Ac("* ",o.cc(31,29,"labelPrice")," $"),o.Ab(3),o.hc("ngIf",e.fieldIsValid("price")),o.Ab(3),o.Ac("* ",o.cc(37,31,"labelStock"),""),o.Ab(3),o.hc("ngIf",e.fieldIsValid("stock")),o.Ab(3),o.Ac("* ",o.cc(43,33,"labelCategory"),""),o.Ab(3),o.hc("ngForOf",e.listCategories),o.Ab(1),o.hc("ngIf",e.fieldIsValid("category")),o.Ab(4),o.Ac(" ",o.cc(51,35,"btnClose")," "),o.Ab(2),o.hc("disabled",e.myFormProduct.invalid||e.showLoading),o.Ab(2),o.Ac(" ",o.cc(55,37,"btnSaveProduct")," "),o.Ab(2),o.hc("hidden",!e.showLoading)}},directives:[a.l,r.p,r.h,r.d,r.a,r.g,r.c,r.m,r.k,r.n,a.k,mt.a,r.j,r.q],pipes:[z],encapsulation:2}),t})(),Tt=(()=>{class t{constructor(t,e){this.productService=t,this.translate=e,this.productDelete=new o.n,this.productRemoved=!1,this.activeLang="es",this.showLoading=!1,this.getLang()}getLang(){const t=localStorage.getItem("lang");this.translate.setDefaultLang(t||this.activeLang)}deleteProduct(){this.showLoading=!0,this.deleteProduct$=this.productService.deleteProduct(this.productSelected).subscribe(t=>{this.productDelete.emit(t.product),this.productRemoved=!0,this.showLoading=!1,this.showToast("Success","It was deleted correctly","success"),this.activateButtonAgain(),this.deleteProduct$.unsubscribe()},t=>{this.showToast("Oh! there was a problem",t,"error"),this.activateButtonAgain(),this.showLoading=!1})}activateButtonAgain(){setTimeout(()=>{this.productRemoved=!1},1e3)}showToast(t,e,s,a=2e3){n.a.fire(t,e,s),setInterval(()=>{n.a.close()},a)}}return t.\u0275fac=function(e){return new(e||t)(o.Lb(gt),o.Lb(B))},t.\u0275cmp=o.Fb({type:t,selectors:[["app-modal-delete-product"]],inputs:{productSelected:"productSelected",productRemoved:"productRemoved"},outputs:{productDelete:"productDelete"},decls:38,vars:27,consts:[["id","modalDeleteProduct","tabindex","-1","aria-labelledby","modalDeleteProduct","aria-hidden","true","data-bs-backdrop","static",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","modalNewProduct",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-9"],[1,"col-sm-12","mt-3"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger",3,"click"],[1,"pi","me-2","pi-times"],["type","button","data-bs-dismiss","modal",1,"btn","btn-primary","float-end",3,"disabled","hidden","click"],[1,"pi","me-2","pi-trash"],[1,"text-center","mt-5","mb-5",3,"hidden"],[1,"mb-3"],["role","status",1,"spinner-border","text-secondary"],[1,"visually-hidden"]],template:function(t,e){1&t&&(o.Rb(0,"div",0),o.Rb(1,"div",1),o.Rb(2,"div",2),o.Rb(3,"div",3),o.Rb(4,"h5",4),o.yc(5),o.bc(6,"translate"),o.Qb(),o.Mb(7,"button",5),o.Qb(),o.Rb(8,"div",6),o.Rb(9,"dl",7),o.Rb(10,"dt",8),o.yc(11),o.bc(12,"translate"),o.Qb(),o.Rb(13,"dd",9),o.yc(14),o.Qb(),o.Rb(15,"dt",8),o.yc(16),o.bc(17,"translate"),o.Qb(),o.Rb(18,"dd",9),o.Rb(19,"p"),o.yc(20),o.Qb(),o.Qb(),o.Rb(21,"div",10),o.Rb(22,"button",11),o.Yb("click",function(){return e.activateButtonAgain()}),o.Mb(23,"i",12),o.yc(24),o.bc(25,"translate"),o.Qb(),o.Rb(26,"button",13),o.Yb("click",function(){return e.deleteProduct()}),o.Mb(27,"i",14),o.yc(28),o.bc(29,"translate"),o.Qb(),o.Qb(),o.Qb(),o.Rb(30,"div",15),o.Rb(31,"h3",16),o.yc(32),o.bc(33,"translate"),o.Qb(),o.Rb(34,"div",17),o.Rb(35,"span",18),o.yc(36),o.bc(37,"translate"),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb()),2&t&&(o.Ab(5),o.Bc(" ",o.cc(6,13,"modalDeleteProduct.title")," : ",e.productSelected.name," "),o.Ab(6),o.Ac("",o.cc(12,15,"labelCategory"),":"),o.Ab(3),o.zc(e.productSelected.category),o.Ab(2),o.Ac("",o.cc(17,17,"labelDescription"),":"),o.Ab(4),o.zc(e.productSelected.description),o.Ab(4),o.Ac(" ",o.cc(25,19,"modalDelete.back")," "),o.Ab(2),o.hc("disabled",e.productRemoved||e.showLoading)("hidden",e.productRemoved),o.Ab(2),o.Ac(" ",o.cc(29,21,"modalDeleteProduct.title")," "),o.Ab(2),o.hc("hidden",!e.showLoading),o.Ab(2),o.zc(o.cc(33,23,"loading")),o.Ab(4),o.zc(o.cc(37,25,"loading")))},pipes:[z],encapsulation:2}),t})(),Mt=(()=>{class t{constructor(t){this.elementRef=t}loadImgNotFound(){this.elementRef.nativeElement.src=this.urlCustom||"https://coacademy-server-jc.com/uploads/courses/images/890.jpg"}}return t.\u0275fac=function(e){return new(e||t)(o.Lb(o.l))},t.\u0275dir=o.Gb({type:t,selectors:[["","appImgNotFound",""]],hostBindings:function(t,e){1&t&&o.Yb("error",function(){return e.loadImgNotFound()})},inputs:{urlCustom:"urlCustom"}}),t})(),Ot=(()=>{class t{constructor(){this.nameProduct="name",this.descriptionProduct="description",this.priceProduct=0,this.stockProduct=0,this.imgProduct="",this.categoryProduct=" ",this.products=[]}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Fb({type:t,selectors:[["app-card-product"]],inputs:{nameProduct:"nameProduct",descriptionProduct:"descriptionProduct",priceProduct:"priceProduct",stockProduct:"stockProduct",imgProduct:"imgProduct",categoryProduct:"categoryProduct",products:"products"},decls:27,vars:16,consts:[[1,"card-body"],[1,"card-text"],[1,"text-muted"],["appImgNotFound","",1,"img-fluid",3,"src","alt"],["type","button","label","Close","data-bs-dismiss","modal",1,"btn","btn-danger","float-end","mt-5"],[1,"pi","me-2","pi-times"]],template:function(t,e){1&t&&(o.Rb(0,"div",0),o.Rb(1,"p",1),o.Rb(2,"strong"),o.yc(3,"Product: "),o.Qb(),o.yc(4),o.bc(5,"titlecase"),o.Rb(6,"small",2),o.yc(7),o.Qb(),o.Mb(8,"br"),o.Rb(9,"strong"),o.yc(10,"Description: "),o.Qb(),o.yc(11),o.bc(12,"titlecase"),o.Mb(13,"br"),o.Rb(14,"strong"),o.yc(15,"Price: "),o.Qb(),o.yc(16),o.bc(17,"currency"),o.Mb(18,"br"),o.Rb(19,"strong"),o.yc(20,"Stock: "),o.Qb(),o.yc(21),o.Qb(),o.Rb(22,"div",1),o.Mb(23,"img",3),o.Qb(),o.Rb(24,"button",4),o.Mb(25,"i",5),o.yc(26," Close\n"),o.Qb(),o.Qb()),2&t&&(o.Ab(4),o.Ac("",o.cc(5,7,e.nameProduct)," | "),o.Ab(3),o.zc(e.categoryProduct),o.Ab(4),o.Ac(" ",o.cc(12,9,e.descriptionProduct)," "),o.Ab(5),o.Ac(" ",o.ec(17,11,e.priceProduct,"USD","symbol","1.0-0")," "),o.Ab(5),o.Ac(" ",e.stockProduct," U "),o.Ab(2),o.hc("src",e.imgProduct,o.tc)("alt",e.nameProduct))},directives:[Mt],pipes:[a.t,a.c],encapsulation:2}),t})(),Dt=(()=>{class t{constructor(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Fb({type:t,selectors:[["app-product-detail"]],inputs:{productSelected:"productSelected"},decls:9,vars:6,consts:[["id","modalDetailProduct","tabindex","-1","aria-labelledby","modalDetailProduct","aria-hidden","true","data-bs-backdrop","static",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","modalNewProduct",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[3,"nameProduct","imgProduct","descriptionProduct","priceProduct","stockProduct","categoryProduct"]],template:function(t,e){1&t&&(o.Rb(0,"div",0),o.Rb(1,"div",1),o.Rb(2,"div",2),o.Rb(3,"div",3),o.Rb(4,"h5",4),o.yc(5,"Detail Product"),o.Qb(),o.Mb(6,"button",5),o.Qb(),o.Rb(7,"div",6),o.Mb(8,"app-card-product",7),o.Qb(),o.Qb(),o.Qb(),o.Qb()),2&t&&(o.Ab(8),o.hc("nameProduct",e.productSelected.name)("imgProduct",e.productSelected.img)("descriptionProduct",e.productSelected.description)("priceProduct",e.productSelected.price)("stockProduct",e.productSelected.stock)("categoryProduct",e.productSelected.category))},directives:[Ot],encapsulation:2}),t})(),Ft=(()=>{class t{constructor(t,e,s){this.elementRef=t,this.rendered2=e,this.injector=s}ngAfterContentInit(){var t="";const e=this.injector.get(z),s=this.elementRef.nativeElement;this.countProduct>0&&this.countProduct<this.marginSale.productHight?(this.rendered2.addClass(s,"badge"),this.rendered2.addClass(s,"bg-secondary"),t=e.transform("tableStockUnder"),this.rendered2.setProperty(s,"textContent",t)):0==this.countProduct?(this.rendered2.addClass(s,"badge"),this.rendered2.addClass(s,"bg-danger"),t=e.transform("tableStockAvailable"),this.rendered2.setProperty(s,"textContent",t)):(this.rendered2.addClass(s,"badge"),this.rendered2.addClass(s,"bg-primary"),t=e.transform("tableStockOutOfStock"),this.rendered2.setProperty(s,"textContent",t))}}return t.\u0275fac=function(e){return new(e||t)(o.Lb(o.l),o.Lb(o.E),o.Lb(o.s))},t.\u0275dir=o.Gb({type:t,selectors:[["","appProductStatus",""]],inputs:{countProduct:"countProduct",marginSale:"marginSale"},features:[o.zb([z])]}),t})();function Ut(t,e){if(1&t){const t=o.Sb();o.Rb(0,"tr"),o.Rb(1,"td",20),o.Rb(2,"div",21),o.Rb(3,"div",22),o.Mb(4,"img",23),o.Qb(),o.Rb(5,"div",24),o.Rb(6,"div",25),o.Rb(7,"div",26),o.yc(8),o.bc(9,"titlecase"),o.Qb(),o.Rb(10,"div",27),o.yc(11),o.bc(12,"titlecase"),o.Qb(),o.Rb(13,"div",27),o.Rb(14,"td"),o.Rb(15,"span",28),o.yc(16),o.bc(17,"translate"),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Rb(18,"td",29),o.Rb(19,"div",30),o.Mb(20,"img",31),o.Mb(21,"div",21),o.Rb(22,"div",24),o.Rb(23,"div",32),o.Rb(24,"div",26),o.yc(25),o.bc(26,"titlecase"),o.Qb(),o.Rb(27,"div",27),o.yc(28),o.bc(29,"titlecase"),o.Qb(),o.Rb(30,"div",33),o.Rb(31,"strong"),o.yc(32),o.bc(33,"currency"),o.Qb(),o.Qb(),o.Rb(34,"div",27),o.Rb(35,"td"),o.Rb(36,"span",28),o.yc(37),o.bc(38,"translate"),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Rb(39,"td",34),o.Rb(40,"p",35),o.yc(41),o.bc(42,"currency"),o.Qb(),o.Qb(),o.Rb(43,"td"),o.Rb(44,"div",36),o.Rb(45,"button",37),o.Yb("click",function(){o.sc(t);const s=e.$implicit;return o.ac(2).selectProduct(!1,s)}),o.Mb(46,"i",38),o.yc(47),o.bc(48,"translate"),o.Qb(),o.Rb(49,"button",39),o.Yb("click",function(){o.sc(t);const s=e.$implicit;return o.ac(2).selectProduct(!1,s)}),o.Mb(50,"i",40),o.yc(51),o.bc(52,"translate"),o.Qb(),o.Rb(53,"button",41),o.Yb("click",function(){o.sc(t);const s=e.$implicit;return o.ac(2).selectProduct(!1,s)}),o.Mb(54,"i",42),o.yc(55),o.bc(56,"translate"),o.Qb(),o.Qb(),o.Qb(),o.Qb()}if(2&t){const t=e.$implicit,s=o.ac(2);o.Ab(4),o.hc("src",t.img,o.tc)("alt",t.name),o.Ab(4),o.Ac(" ",o.cc(9,19,t.name)," "),o.Ab(3),o.Ac(" ",o.cc(12,21,t.category)," "),o.Ab(4),o.hc("countProduct",t.stock)("marginSale",s.marginsale),o.Ab(1),o.Ac(" ",o.cc(17,23,"tableStockOutOfStock")," "),o.Ab(4),o.hc("src",t.img,o.tc)("alt",t.name),o.Ab(5),o.Ac(" ",o.cc(26,25,t.name)," "),o.Ab(3),o.Ac(" ",o.cc(29,27,t.category)," "),o.Ab(4),o.Ac(" ",o.ec(33,29,t.price,"$","symbol","1.0-0")," "),o.Ab(4),o.hc("countProduct",t.stock)("marginSale",s.marginsale),o.Ab(1),o.Ac(" ",o.cc(38,34,"tableStockOutOfStock")," "),o.Ab(4),o.Ac(" ",o.ec(42,36,t.price,"$","symbol","1.0-0")," "),o.Ab(6),o.Ac(" ",o.cc(48,41,"tableBtnDetail")," "),o.Ab(4),o.Ac(" ",o.cc(52,43,"tableBtnEdit")," "),o.Ab(4),o.Ac(" ",o.cc(56,45,"tableBtnDelete")," ")}}function Nt(t,e){if(1&t){const t=o.Sb();o.Rb(0,"li"),o.Rb(1,"a",43),o.Yb("click",function(){o.sc(t);const s=e.$implicit;return o.ac(2).changePage(s.numberPage)}),o.yc(2),o.Qb(),o.Qb()}if(2&t){const t=e.$implicit,s=o.ac(2);o.Cb(t.numberPage==s.pageActive?"page-item active":"page-item"),o.Ab(2),o.Ac(" ",t.numberPage," ")}}function $t(t,e){if(1&t){const t=o.Sb();o.Rb(0,"div"),o.Rb(1,"app-search",4),o.Yb("productSearch",function(e){return o.sc(t),o.ac().refreshTheList(e)}),o.Qb(),o.Rb(2,"div",5),o.Rb(3,"table",6),o.Rb(4,"thead"),o.Rb(5,"tr"),o.Rb(6,"th",7),o.yc(7),o.bc(8,"translate"),o.Qb(),o.Rb(9,"th",8),o.yc(10),o.bc(11,"translate"),o.Qb(),o.Rb(12,"th",7),o.yc(13),o.bc(14,"translate"),o.Qb(),o.Qb(),o.Qb(),o.Rb(15,"tbody"),o.wc(16,Ut,57,47,"tr",9),o.Qb(),o.Qb(),o.Rb(17,"nav",10),o.Rb(18,"ul",11),o.Rb(19,"li",12),o.Rb(20,"button",13),o.Yb("click",function(){o.sc(t);const e=o.ac();return e.changePage(e.pageActive-1)}),o.Rb(21,"span",14),o.yc(22,"\xab"),o.Qb(),o.Qb(),o.Qb(),o.wc(23,Nt,3,3,"li",15),o.Rb(24,"li",12),o.Rb(25,"button",16),o.Yb("click",function(){o.sc(t);const e=o.ac();return e.changePage(e.pageActive+1)}),o.Rb(26,"span",14),o.yc(27,"\xbb"),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Rb(28,"app-product-add-and-update",17),o.Yb("productNew",function(e){return o.sc(t),o.ac().addToTheList(e)})("productUpdate",function(e){return o.sc(t),o.ac().updateToTheList(e)}),o.Qb(),o.Rb(29,"app-modal-delete-product",18),o.Yb("productDelete",function(e){return o.sc(t),o.ac().deleteTheList(e)}),o.Qb(),o.Mb(30,"app-product-detail",19),o.Qb()}if(2&t){const t=o.ac();o.Ab(7),o.zc(o.cc(8,13,"table.product")),o.Ab(3),o.Ac(" ",o.cc(11,15,"table.price")," "),o.Ab(3),o.zc(o.cc(14,17,"table.action")),o.Ab(3),o.hc("ngForOf",t.listProducts),o.Ab(4),o.hc("disabled",t.pageActive<=0)("hidden",-1==t.pageActive),o.Ab(3),o.hc("ngForOf",t.pagination),o.Ab(2),o.hc("disabled",t.pageActive==t.pagination.length),o.Ab(3),o.hc("productInput",t.productSelected)("isNewProduct",t.isNewProduct),o.Ab(1),o.hc("productRemoved",!1)("productSelected",t.productSelected),o.Ab(1),o.hc("productSelected",t.productSelected)}}function _t(t,e){1&t&&(o.Rb(0,"div",45),o.yc(1," No products were found! "),o.Qb())}function Bt(t,e){if(1&t&&o.wc(0,_t,2,0,"div",44),2&t){const t=o.ac();o.hc("ngIf",0==t.showLoading)}}let zt=(()=>{class t{constructor(t,e,s){this.productService=t,this.translate=e,this.settingService=s,this.activeLang="es",this.listProducts=[{category:"",description:"",name:"",price:0,stock:0}],this.pagination=[],this.pageActive=1,this.isNewProduct=!0,this.showLoading=!0,this.getLang()}ngOnDestroy(){this.getAllProducts$.unsubscribe()}getSetting(){this.getAllSettings$=this.settingService.getSetting().subscribe(t=>{t&&(this.marginsale=t)})}getLang(){const t=localStorage.getItem("lang");this.translate.setDefaultLang(t||this.activeLang)}getAllProduct(){this.getAllProducts$=this.productService.getAllProducts().subscribe(t=>{const e=Number(t.total)/6;for(let s=0;s<e;s++)this.pagination.push({numberPage:s+1,url:"aa"});t.products.length>0&&(this.listProducts=t.products),this.showLoading=!1},t=>{this.listProducts=[],this.showLoading=!1,this.showToast("Oh! there was a problem",t,"error")})}ngOnInit(){this.productSelected={category:"",description:"",name:"",price:0,stock:0},this.getSetting(),void 0!==this.searchCategory?(this.searchProduct(),this.showLoading=!1):this.getAllProduct()}selectProduct(t,e){void 0!==e?(this.productSelected=e,this.isNewProduct=t):(this.productSelected={category:"",description:"",name:"",price:0,stock:0},this.isNewProduct=t)}addToTheList(t){this.listProducts.push(t)}updateToTheList(t){const e=this.listProducts.findIndex(e=>e._id==t._id);let s=[...this.listProducts];s[e]=Object.assign(Object.assign({},s[e]),{name:t.name,description:t.description,price:t.price,img:t.img,category:t.category,stock:t.stock,_id:t._id}),this.listProducts=s}refreshTheList(t){0!==t.length&&(this.listProducts=t)}deleteTheList(t){this.listProducts=this.listProducts.filter(e=>e._id!==t._id)}changePage(t){t<=0||t>this.pagination.length?this.showToast("Ups!","The value is invalid "+t,"info"):(this.pageActive=t,this.productService.getAllProducts(6*(t-1)).subscribe(t=>{this.listProducts=t.products}))}searchProduct(){this.productService.getProductById("",this.searchCategory).subscribe(t=>{0!==t.length&&(this.listProducts=t)},t=>{this.showToast("Oh! there was a problem",t,"error")})}showToast(t,e,s,a=2e3){n.a.fire(t,e,s),setInterval(()=>{n.a.close()},a)}}return t.\u0275fac=function(e){return new(e||t)(o.Lb(gt),o.Lb(B),o.Lb(V))},t.\u0275cmp=o.Fb({type:t,selectors:[["app-list-products"]],inputs:{searchCategory:"searchCategory"},features:[o.zb([pt.f])],decls:7,vars:5,consts:[["data-bs-target","#modalProduct","data-bs-toggle","modal",1,"mb-4","btn","btn-primary",3,"click"],[1,"pi","me-2","pi-plus"],[4,"ngIf","ngIfElse"],["messageThereAreNoProducts",""],[3,"productSearch"],[1,"table-responsive"],[1,"table","table-hover","align-middle"],["scope","col"],["scope","col",1,"d-none","d-sm-none","d-md-table-cell"],[4,"ngFor","ngForOf"],["aria-label","Page navigation"],[1,"pagination"],[1,"page-item"],["aria-label","Previous",1,"page-link","backAndNext",3,"disabled","hidden","click"],["aria-hidden","true"],[3,"class",4,"ngFor","ngForOf"],["aria-label","Next",1,"page-link","backAndNext",3,"disabled","click"],[3,"productInput","isNewProduct","productNew","productUpdate"],[3,"productRemoved","productSelected","productDelete"],[3,"productSelected"],[1,"d-none","d-md-block"],[1,"row","justify-content-sm-center","justify-content-md-start"],[1,"col-sm-12","col-md-2","mb-md-2","mt-md-2"],["appImgNotFound","",1,"img-fluid","img-list",3,"src","alt"],[1,"col-sm-12","col-md-9","mb-md-2","mt-md-2"],[1,"ms-3"],[1,"fw-bold","mb-1"],[1,"text-muted","mb-0"],["appProductStatus","",3,"countProduct","marginSale"],[1,"d-block","d-md-none"],[1,"col-sm-12","col-md-2","mb-md-2","mt-md-2","text-center"],["appImgNotFound","",1,"img-list-responsive",3,"src","alt"],[1,"ms-3","mt-3"],[1,"text-dark","mb-0"],[1,"d-none","d-md-table-cell"],[1,"fw-bold"],[1,"d-grid","gap-2","d-md-block"],["data-bs-target","#modalDetailProduct","data-bs-toggle","modal",1,"btn","btn-primary","mx-md-1","mb-2","mb-sm-2","mx-sm-2",3,"click"],[1,"pi","me-2","pi-eye"],["data-bs-target","#modalProduct","data-bs-toggle","modal",1,"btn","btn-secondary","mx-md-1","mb-2","mb-sm-2","mx-sm-2",3,"click"],[1,"pi","me-2","pi-pencil"],["data-bs-target","#modalDeleteProduct","data-bs-toggle","modal",1,"btn","btn-danger","mx-md-1","mb-2","mb-sm-2","mx-sm-2",3,"click"],[1,"pi","me-2","pi-trash"],[1,"page-link",3,"click"],["class","alert alert-danger","role","alert",4,"ngIf"],["role","alert",1,"alert","alert-danger"]],template:function(t,e){if(1&t&&(o.Rb(0,"button",0),o.Yb("click",function(){return e.selectProduct(!0)}),o.Mb(1,"i",1),o.yc(2),o.bc(3,"translate"),o.Qb(),o.wc(4,$t,31,19,"div",2),o.wc(5,Bt,1,1,"ng-template",null,3,o.xc)),2&t){const t=o.rc(6);o.Ab(2),o.Ac(" ",o.cc(3,3,"buttonNewProduct.title"),"\n"),o.Ab(2),o.hc("ngIf",0!==e.listProducts.length)("ngIfElse",t)}},directives:[a.l,vt,a.k,xt,Tt,Dt,Mt,Ft],pipes:[z,a.t,a.c],styles:[".img-list[_ngcontent-%COMP%]{max-width:70px;cursor:pointer}.img-list-responsive[_ngcontent-%COMP%]{max-width:20vw;cursor:pointer}"]}),t})(),jt=(()=>{class t{constructor(t,e){this.route=t,this.translate=e,this.activeLang="es",this.productSelected={category:"",name:"",description:"",price:0,stock:0,img:""},this.getLang()}getLang(){const t=localStorage.getItem("lang");this.translate.setDefaultLang(t||this.activeLang)}ngOnInit(){const t=this.route.snapshot.queryParamMap.getAll("categoryid");if(t.length>0&&t[0].length>0){const[e]=t;this.searchCategory=e}this.isList=!0,this.isNew=!0}showProduct(t){this.productSelected=t}}return t.\u0275fac=function(e){return new(e||t)(o.Lb(K.a),o.Lb(B))},t.\u0275cmp=o.Fb({type:t,selectors:[["app-product"]],decls:10,vars:10,consts:[[1,"row","justify-content-lg-center"],[1,"col-12","col-sm-12","col-md-12","col-lg-12","col-xl-12","mb-4"],["styleClass","p-card-shadow text-lg-start text-sm-center",3,"header","subheader"],[1,"col-12","col-sm-12","col-md-12","col-lg-12","col-xl-12"],[3,"searchCategory"]],template:function(t,e){1&t&&(o.Rb(0,"div",0),o.Rb(1,"div",1),o.Rb(2,"p-card",2),o.bc(3,"translate"),o.bc(4,"translate"),o.Rb(5,"p"),o.yc(6),o.bc(7,"translate"),o.Qb(),o.Qb(),o.Qb(),o.Rb(8,"div",3),o.Mb(9,"app-list-products",4),o.Qb(),o.Qb()),2&t&&(o.Ab(2),o.hc("header",o.cc(3,4,"productPage.title"))("subheader",o.cc(4,6,"productPage.subTitle")),o.Ab(4),o.Ac(" ",o.cc(7,8,"productPage.description")," "),o.Ab(3),o.hc("searchCategory",e.searchCategory))},directives:[q.a,zt],pipes:[z],encapsulation:2}),t})();var Et=s("wd/R");let Yt=(()=>{class t{constructor(t){this.http=t,this._urlBase=E.a.URLBASE,this.getListSales=()=>this.http.get(`${this._urlBase}/sale`)}saveSale(t,e){return this.http.post(`${this._urlBase}/sale/save`,{products:e,saleDate:Date.now(),total:t})}staticticsSale(){return this.http.get(`${this._urlBase}/sale/statisticsForMonth`)}getListSalesOnDay(){return this.http.get(`${this._urlBase}/sale/statisticsOnDay`)}getSalesForMonth(t){return this.http.get(`${this._urlBase}/sale/date?date=${t}`)}getSalesLastDay(t=7){return this.http.get(`${this._urlBase}/sale/salesLastDay?numberOfDays=${t}`)}}return t.\u0275fac=function(e){return new(e||t)(o.Vb(Y.b))},t.\u0275prov=o.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();Et.locale("cl");let Vt=(()=>{class t{constructor(t,e){this.salesServices=t,this.translate=e,this.activeLang="es",this.getDate=t=>{const e=Et(t);return e.set({hour:0,minute:0,second:0,millisecond:0}),e.toISOString()},this.currentDate=(new Date).toLocaleDateString("cl"),this.activeFilter=!1,this.filteredSales=new o.n,this.getLang()}ngOnInit(){this.month=(new Date).toLocaleDateString("cl")}filterSales(t){const e=this.getDate(t);this.getSalesForMonth$=this.salesServices.getSalesForMonth(e).subscribe(t=>{t.sales.map(t=>t),this.filteredSales.emit(t.sales),this.getSalesForMonth$.unsubscribe()})}changeFilter(){this.activeFilter=!1}getLang(){const t=localStorage.getItem("lang");this.translate.setDefaultLang(t||this.activeLang)}}return t.\u0275fac=function(e){return new(e||t)(o.Lb(Yt),o.Lb(B))},t.\u0275cmp=o.Fb({type:t,selectors:[["app-filter"]],outputs:{filteredSales:"filteredSales"},decls:13,vars:7,consts:[[1,"my-3"],[1,"row","justify-content-start"],[1,"col-12","mb-2","mt-3"],[1,"col-sm-12","col-md-4","col-lg-3","col-xl-3","col-xxl-4","mb-sm-3","mb-md-0"],["type","date","name","month","id","month",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-primary","mt-2",3,"click"]],template:function(t,e){1&t&&(o.Rb(0,"div",0),o.Rb(1,"div",1),o.Rb(2,"div",2),o.Rb(3,"h5"),o.Rb(4,"strong"),o.yc(5),o.bc(6,"translate"),o.Qb(),o.Qb(),o.Qb(),o.Rb(7,"div",3),o.Rb(8,"input",4),o.Yb("ngModelChange",function(t){return e.month=t}),o.Qb(),o.Rb(9,"button",5),o.Yb("click",function(){return e.filterSales(e.month)}),o.yc(10),o.bc(11,"translate"),o.Qb(),o.Qb(),o.Mb(12,"div",3),o.Qb(),o.Qb()),2&t&&(o.Ab(5),o.zc(o.cc(6,3,"filterTitle")),o.Ab(3),o.hc("ngModel",e.month),o.Ab(2),o.zc(o.cc(11,5,"filter")))},directives:[r.a,r.g,r.i],pipes:[z],encapsulation:2}),t})();var qt=s("rEr+"),Ht=s("jIHw");let Kt=(()=>{class t{constructor(t,e,s){this.elementRef=t,this.rendered2=e,this.injector=s}ngAfterContentInit(){const t=this.injector.get(z);var e="";const s=this.elementRef.nativeElement;this.saleTotal<this.marginSale.saleLow?(this.rendered2.addClass(s,"btn"),this.rendered2.addClass(s,"btn-danger"),e=t.transform("saleLow"),this.rendered2.setProperty(s,"textContent",e)):this.saleTotal>this.marginSale.saleLow&&this.saleTotal<=this.marginSale.productHight?(this.rendered2.addClass(s,"btn-warning"),this.rendered2.addClass(s,"btn"),e=t.transform("saleMiddle"),this.rendered2.setProperty(s,"textContent",e)):(this.rendered2.addClass(s,"btn"),this.rendered2.addClass(s,"btn-primary"),e=t.transform("saleHight"),this.rendered2.setProperty(s,"textContent",e))}}return t.\u0275fac=function(e){return new(e||t)(o.Lb(o.l),o.Lb(o.E),o.Lb(o.s))},t.\u0275dir=o.Gb({type:t,selectors:[["","appAverageSale",""]],inputs:{saleTotal:"saleTotal",marginSale:"marginSale"},features:[o.zb([z])]}),t})();function Wt(t,e){1&t&&(o.Rb(0,"tr"),o.Rb(1,"th",10),o.yc(2),o.bc(3,"translate"),o.Qb(),o.Rb(4,"th",11),o.yc(5),o.bc(6,"translate"),o.Mb(7,"p-sortIcon",12),o.Qb(),o.Rb(8,"th",13),o.yc(9),o.bc(10,"translate"),o.Mb(11,"p-sortIcon",14),o.Qb(),o.Rb(12,"th",15),o.yc(13),o.bc(14,"translate"),o.Mb(15,"p-sortIcon",16),o.Qb(),o.Rb(16,"th",11),o.yc(17),o.bc(18,"translate"),o.Mb(19,"p-sortIcon",12),o.Qb(),o.Qb()),2&t&&(o.Ab(2),o.zc(o.cc(3,5,"Detail")),o.Ab(3),o.zc(o.cc(6,7,"Total")),o.Ab(4),o.Ac("",o.cc(10,9,"Date")," "),o.Ab(4),o.zc(o.cc(14,11,"NumberOfProductTypes")),o.Ab(4),o.Ac("",o.cc(18,13,"TypeOfSale")," "))}function Gt(t,e){if(1&t&&(o.Rb(0,"tr"),o.Rb(1,"td",10),o.Mb(2,"button",17),o.Qb(),o.Rb(3,"td",18),o.Rb(4,"strong"),o.yc(5),o.bc(6,"currency"),o.Qb(),o.Qb(),o.Rb(7,"td",19),o.Rb(8,"strong"),o.yc(9),o.bc(10,"date"),o.Qb(),o.Qb(),o.Rb(11,"td",10),o.Rb(12,"strong"),o.yc(13),o.Qb(),o.yc(14),o.bc(15,"translate"),o.Qb(),o.Rb(16,"td",18),o.Mb(17,"button",20),o.Qb(),o.Qb()),2&t){const t=e.$implicit,s=e.expanded,a=o.ac(2);o.Ab(2),o.hc("pRowToggler",t)("icon",s?"pi pi-chevron-down":"pi pi-chevron-right"),o.Ab(3),o.Ac(" ",o.ec(6,8,t.total,"$","symbol","1.0-0")," "),o.Ab(4),o.Ac(" ",o.dc(10,13,t.date,"dd-MM-YYYY","UTC")," "),o.Ab(4),o.Ac(" ",t.products.length," "),o.Ab(1),o.Ac(" ",o.cc(15,17,1==t.products.length?"product":"products")," "),o.Ab(3),o.hc("marginSale",a.marginsale)("saleTotal",t.total)}}function Jt(t,e){1&t&&(o.Rb(0,"h5",26),o.Rb(1,"strong"),o.yc(2),o.bc(3,"translate"),o.Qb(),o.Qb(),o.Rb(4,"tr"),o.Rb(5,"th",27),o.yc(6),o.bc(7,"translate"),o.Mb(8,"p-sortIcon",28),o.Qb(),o.Rb(9,"th",27),o.yc(10),o.bc(11,"translate"),o.Mb(12,"p-sortIcon",28),o.Qb(),o.Rb(13,"th",29),o.yc(14),o.bc(15,"translate"),o.Mb(16,"p-sortIcon",30),o.Qb(),o.Rb(17,"th",31),o.yc(18),o.bc(19,"translate"),o.Mb(20,"p-sortIcon",32),o.Qb(),o.Qb()),2&t&&(o.Ab(2),o.Ac(" ",o.cc(3,5,"detailSale")," "),o.Ab(4),o.zc(o.cc(7,7,"labelImg")),o.Ab(4),o.Ac("",o.cc(11,9,"table.product")," "),o.Ab(4),o.Ac("",o.cc(15,11,"labelPrice")," "),o.Ab(4),o.Ac("",o.cc(19,13,"labelSubTotal")," "))}function Xt(t,e){if(1&t&&(o.Rb(0,"tr"),o.Rb(1,"td"),o.Mb(2,"img",33),o.Qb(),o.Rb(3,"td"),o.Rb(4,"strong"),o.yc(5),o.Qb(),o.Qb(),o.Rb(6,"td"),o.Rb(7,"strong"),o.yc(8),o.bc(9,"currency"),o.Qb(),o.Qb(),o.Rb(10,"td"),o.Rb(11,"strong"),o.yc(12),o.bc(13,"currency"),o.Qb(),o.Qb(),o.Qb()),2&t){const t=e.$implicit;o.Ab(2),o.hc("src",t.productDB.img,o.tc)("alt",t.name),o.Ab(3),o.Bc(" ",t.amount," ",t.productDB.name," "),o.Ab(3),o.Ac(" ",o.ec(9,6,t.productDB.price,"$","symbol","1.0-0")," "),o.Ab(4),o.Ac(" ",o.ec(13,11,t.productDB.price*t.amount,"$","symbol","1.0-0")," ")}}function Zt(t,e){1&t&&(o.Rb(0,"h6",34),o.Rb(1,"strong"),o.yc(2),o.bc(3,"translate"),o.Qb(),o.Qb()),2&t&&(o.Ab(2),o.Ac(" ",o.cc(3,1,"endSale")," "))}function te(t,e){1&t&&(o.Rb(0,"tr"),o.Rb(1,"td",21),o.yc(2,"There are no order for this product yet."),o.Qb(),o.Qb())}function ee(t,e){if(1&t&&(o.Rb(0,"tr"),o.Rb(1,"td",21),o.Rb(2,"div",22),o.Rb(3,"p-table",23),o.wc(4,Jt,21,15,"ng-template",7),o.wc(5,Xt,14,16,"ng-template",8),o.wc(6,Zt,4,3,"ng-template",24),o.wc(7,te,3,0,"ng-template",25),o.Qb(),o.Qb(),o.Qb(),o.Qb()),2&t){const t=e.$implicit;o.Ab(3),o.hc("value",t.products)}}function se(t,e){if(1&t&&(o.Rb(0,"p-table",6),o.wc(1,Wt,20,15,"ng-template",7),o.wc(2,Gt,18,19,"ng-template",8),o.wc(3,ee,8,1,"ng-template",9),o.Qb()),2&t){const t=o.ac();o.hc("value",t.listSales)("scrollable",!0)}}function ae(t,e){1&t&&(o.Rb(0,"div",36),o.yc(1),o.bc(2,"translate"),o.Qb()),2&t&&(o.Ab(1),o.Ac(" ",o.cc(2,1,"NoSalesWereFound")," "))}function re(t,e){if(1&t&&o.wc(0,ae,3,3,"div",35),2&t){const t=o.ac();o.hc("ngIf",!t.showLoading)}}Et().format();let ce=(()=>{class t{constructor(t,e,s){this.salesService=t,this.translate=e,this.settingService=s,this.activeLang="es",this.date=new Date,this.listSales=[],this.showLoading=!0,this.getSales=()=>{const t=this.getDate();this.getSalesForMonth$=this.salesService.getSalesForMonth(t).subscribe(t=>{this.listSales=t.sales.map(t=>t),this.showLoading=!1}),this.addSetting()},this.getDate=t=>{const e=Et(t);return e.set({hour:0,minute:0,second:0,millisecond:0}),e.toISOString()},this.getLang()}ngOnDestroy(){this.getSalesForMonth$.unsubscribe()}addSetting(){this.settings$=this.settingService.getSetting().subscribe(t=>{this.marginsale=t})}ngOnInit(){this.getSales()}getLang(){const t=localStorage.getItem("lang");this.translate.setDefaultLang(t||this.activeLang)}}return t.\u0275fac=function(e){return new(e||t)(o.Lb(Yt),o.Lb(B),o.Lb(V))},t.\u0275cmp=o.Fb({type:t,selectors:[["app-list-sales"]],inputs:{listSales:"listSales"},decls:11,vars:9,consts:[[1,"text-center","mt-5","mb-5",3,"hidden"],[1,"mb-3"],["role","status",1,"spinner-border","text-secondary"],[1,"visually-hidden"],["dataKey","_id","scrollHeight","800vh","scrollDirection","both","styleClass","p-datatable-gridlines",3,"value","scrollable",4,"ngIf","ngIfElse"],["messageThereAreNoSales",""],["dataKey","_id","scrollHeight","800vh","scrollDirection","both","styleClass","p-datatable-gridlines",3,"value","scrollable"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],[1,"d-none","d-sm-none","d-md-table-cell",2,"min-width","200px"],["pSortableColumn","total",2,"min-width","200px"],["field","total"],["pSortableColumn","date",2,"min-width","300px"],["field","date"],["pSortableColumn","products","data-toggle","tooltip","data-placement","top","title","Indicates the number of product types, not its totality",1,"d-none","d-sm-none","d-md-table-cell",2,"min-width","200px"],["field","products"],["type","button","pButton","","pRipple","",1,"p-button-text","p-button-rounded","p-button-plain",3,"pRowToggler","icon"],[2,"min-width","200px"],[2,"min-width","300px"],["appAverageSale","",3,"marginSale","saleTotal"],["colspan","5"],[1,"p-3"],["dataKey","_id",3,"value"],["pTemplate","summary"],["pTemplate","emptymessage"],[1,"text-dark","mb-3"],["pSortableColumn","product"],["field","customer"],["pSortableColumn","price"],["field","price"],["pSortableColumn","amount"],["field","amount"],["appImgNotFound","","width","60",1,"shadow-4",3,"src","alt"],[1,"text-dark","mt-3"],["class","alert alert-danger","role","alert",4,"ngIf"],["role","alert",1,"alert","alert-danger"]],template:function(t,e){if(1&t&&(o.Rb(0,"div",0),o.Rb(1,"h3",1),o.yc(2),o.bc(3,"translate"),o.Qb(),o.Rb(4,"div",2),o.Rb(5,"span",3),o.yc(6),o.bc(7,"translate"),o.Qb(),o.Qb(),o.Qb(),o.wc(8,se,4,2,"p-table",4),o.wc(9,re,1,1,"ng-template",null,5,o.xc)),2&t){const t=o.rc(10);o.hc("hidden",!e.showLoading),o.Ab(2),o.zc(o.cc(3,5,"loading")),o.Ab(4),o.zc(o.cc(7,7,"loading")),o.Ab(2),o.hc("ngIf",e.listSales.length>0)("ngIfElse",t)}},directives:[a.l,qt.d,pt.h,qt.c,qt.b,Ht.a,qt.a,Kt,Mt],pipes:[z,a.c,a.e],encapsulation:2}),t})(),ie=(()=>{class t{constructor(t){this.translate=t,this.activeLang="es",this.listSales=[],this.getLang()}filterSales(t){this.listSales=t}getLang(){const t=localStorage.getItem("lang");this.translate.setDefaultLang(t||this.activeLang)}}return t.\u0275fac=function(e){return new(e||t)(o.Lb(B))},t.\u0275cmp=o.Fb({type:t,selectors:[["app-history"]],inputs:{listSales:"listSales"},decls:2,vars:1,consts:[[3,"filteredSales"],[3,"listSales"]],template:function(t,e){1&t&&(o.Rb(0,"app-filter",0),o.Yb("filteredSales",function(t){return e.filterSales(t)}),o.Qb(),o.Mb(1,"app-list-sales",1)),2&t&&(o.Ab(1),o.hc("listSales",e.listSales))},directives:[Vt,ce],encapsulation:2}),t})();var ne=s("2Vo4");let oe=(()=>{class t{constructor(){this.messageSource=new ne.a([]),this.currentShoppingCart=this.messageSource.asObservable(),this.productIsOnTheList=(t,e,s)=>({thereAreProducts:t.every((t,a)=>{var r,c;return e=a,(null===(r=t.product._id)||void 0===r?void 0:r.toString())!==(null===(c=s._id)||void 0===c?void 0:c.toString())}),indexProductSelected:e})}clearShoppingCart(){this.messageSource.next([]),localStorage.setItem("shoppingCart","")}changeShoppingCart(t,e){const s=this.messageSource.getValue(),a=this.productIsOnTheList(s,0,t),{indexProductSelected:r,thereAreProducts:c}=a;if(c)s.push({product:t,amount:e});else{const{stock:a}=t;a>=s[r].amount&&(s[r].amount+=e)}localStorage.setItem("shoppingCart",JSON.stringify(s)),this.messageSource.next(s)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=o.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function le(t,e){1&t&&(o.Rb(0,"div",2),o.Rb(1,"strong"),o.yc(2),o.bc(3,"translate"),o.Qb(),o.Mb(4,"div",3),o.Qb()),2&t&&(o.Ab(2),o.zc(o.cc(3,1,"loading")))}function be(t,e){1&t&&(o.Rb(0,"tr"),o.Rb(1,"th"),o.yc(2,"Imagen"),o.Qb(),o.Rb(3,"th",10),o.yc(4),o.bc(5,"translate"),o.Mb(6,"p-sortIcon",11),o.Qb(),o.Rb(7,"th",12),o.yc(8),o.bc(9,"translate"),o.Mb(10,"p-sortIcon",13),o.Qb(),o.Rb(11,"th",14),o.yc(12),o.bc(13,"translate"),o.Mb(14,"p-sortIcon",15),o.Qb(),o.Rb(15,"th",16),o.yc(16),o.bc(17,"translate"),o.Mb(18,"p-sortIcon",17),o.Qb(),o.Rb(19,"th",12),o.yc(20),o.bc(21,"translate"),o.Mb(22,"p-sortIcon",13),o.Qb(),o.Qb()),2&t&&(o.Ab(4),o.Ac("",o.cc(5,5,"product")," "),o.Ab(4),o.Ac("",o.cc(9,7,"labelPrice")," "),o.Ab(4),o.Ac("",o.cc(13,9,"labelCategory")," "),o.Ab(4),o.Ac("",o.cc(17,11,"labelStock")," "),o.Ab(4),o.Ac("",o.cc(21,13,"labelPrice")," "))}function de(t,e){if(1&t){const t=o.Sb();o.Rb(0,"tr"),o.Rb(1,"td"),o.Mb(2,"img",18),o.Qb(),o.Rb(3,"td"),o.yc(4),o.Qb(),o.Rb(5,"td"),o.yc(6),o.bc(7,"currency"),o.Qb(),o.Rb(8,"td",19),o.yc(9),o.Qb(),o.Rb(10,"td"),o.yc(11),o.Qb(),o.Rb(12,"td"),o.Rb(13,"div",20),o.Rb(14,"div",21),o.Mb(15,"input",22,23),o.Rb(17,"button",24),o.Yb("click",function(){o.sc(t);const s=e.$implicit,a=o.rc(16);return o.ac(2).addCart(s,a.value)}),o.Mb(18,"i",25),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb()}if(2&t){const t=e.$implicit;o.Ab(2),o.hc("src",t.img,o.tc)("alt",t.name),o.Ab(2),o.zc(t.name),o.Ab(2),o.zc(o.ec(7,10,t.price,"USD","symbol","1.0-0")),o.Ab(3),o.zc(t.category),o.Ab(2),o.zc(t.stock),o.Ab(4),o.hc("min",0)("max",t.stock)("defaultValue",1),o.Ab(2),o.hc("disabled",0==t.stock)}}function ue(t,e){1&t&&(o.Rb(0,"tr"),o.Rb(1,"th",10),o.yc(2),o.bc(3,"translate"),o.Mb(4,"p-sortIcon",11),o.Qb(),o.Qb()),2&t&&(o.Ab(2),o.Ac(" ",o.cc(3,1,"labelName")," "))}function he(t,e){if(1&t){const t=o.Sb();o.Rb(0,"tr"),o.Rb(1,"td",26),o.Mb(2,"img",18),o.Qb(),o.Rb(3,"td"),o.Rb(4,"div",27),o.yc(5),o.Mb(6,"br"),o.Rb(7,"strong"),o.yc(8),o.bc(9,"currency"),o.Qb(),o.Qb(),o.Qb(),o.Rb(10,"td",28),o.yc(11),o.Qb(),o.Rb(12,"td",28),o.yc(13),o.Qb(),o.Rb(14,"td"),o.Rb(15,"div",21),o.Mb(16,"input",29,23),o.Rb(18,"button",30),o.Yb("click",function(){o.sc(t);const s=e.$implicit,a=o.rc(17);return o.ac(2).addCart(s,a.value)}),o.Mb(19,"i",25),o.Qb(),o.Qb(),o.Qb(),o.Qb()}if(2&t){const t=e.$implicit;o.Ab(2),o.hc("src",t.img,o.tc)("alt",t.name),o.Ab(3),o.Ac(" ",t.name," "),o.Ab(3),o.Ac(" ",o.ec(9,9,t.price,"USD","symbol","1.0-0")," "),o.Ab(3),o.Ac(" ",t.category," "),o.Ab(2),o.Ac(" ",t.stock," "),o.Ab(3),o.hc("max",t.stock)("defaultValue",1),o.Ab(2),o.hc("disabled",0==t.stock)}}function pe(t,e){if(1&t&&(o.Rb(0,"button",4),o.Mb(1,"i",5),o.yc(2),o.bc(3,"translate"),o.Qb(),o.Rb(4,"p-table",6),o.wc(5,be,23,15,"ng-template",7),o.wc(6,de,19,15,"ng-template",8),o.Qb(),o.Rb(7,"p-table",9),o.wc(8,ue,5,3,"ng-template",7),o.wc(9,he,20,14,"ng-template",8),o.Qb()),2&t){const t=o.ac();o.hc("disabled",0==t.listProduct.length),o.Ab(2),o.Ac(" ",o.cc(3,8,"finished"),"\n"),o.Ab(2),o.hc("value",t.products)("paginator",!0)("rows",5),o.Ab(3),o.hc("value",t.products)("paginator",!0)("rows",5)}}let ge=(()=>{class t{constructor(t,e,s){this.fb=t,this.cartService=e,this.translate=s,this.activeLang="es",this.listSalesShopping=new o.n,this.amount=0,this.listProduct=[],this.getLang()}ngOnInit(){this.cardForm=this.fb.group({quantity:1}),this.getCart()}getLang(){const t=localStorage.getItem("lang");this.translate.setDefaultLang(t||this.activeLang)}getCart(){this.cartService.currentShoppingCart.subscribe(t=>{this.listProduct=t,this.showLoading=!1})}addCart(t,e,s){t.stock<e?this.showToast("You can not add more stock products","error"):(this.cartService.changeShoppingCart(t,Number(e)),this.showToast("It added product","success"))}OnChange(t){this.amount=t>=100?100:t<=0?0:t}showToast(t,e){n.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:t=>{t.addEventListener("mouseenter",n.a.stopTimer),t.addEventListener("mouseleave",n.a.resumeTimer)}}).fire({icon:e,title:t})}}return t.\u0275fac=function(e){return new(e||t)(o.Lb(r.b),o.Lb(oe),o.Lb(B))},t.\u0275cmp=o.Fb({type:t,selectors:[["app-table-product"]],inputs:{products:"products"},outputs:{listSalesShopping:"listSalesShopping"},features:[o.zb([pt.f])],decls:4,vars:2,consts:[["class","d-flex align-items-center p-3",4,"ngIf","ngIfElse"],["table",""],[1,"d-flex","align-items-center","p-3"],["role","status","aria-hidden","true",1,"spinner-border","ms-auto","text-secondary"],["routerLink","/store/sales/shoppingCart","routerLinkActive","router-link-active",1,"btn","btn-primary",3,"disabled"],[1,"pi","pi-shopping-cart","mx-2"],["dataKey","name","responsiveLayout","scroll",1,"d-none","d-sm-none","d-md-table",3,"value","paginator","rows"],["pTemplate","header"],["pTemplate","body"],["dataKey","name","responsiveLayout","scroll",1,"d-table","d-md-none",3,"value","paginator","rows"],["pSortableColumn","name"],["field","name"],["pSortableColumn","price"],["field","price"],["pSortableColumn","category",1,"d-md-none","d-lg-table-cell"],["field","category"],["pSortableColumn","stock"],["field","stock"],["appImgNotFound","","width","80",1,"shadow-4",3,"src","alt"],[1,"d-md-none","d-lg-table-cell"],["role","group","aria-label","Basic example",1,"btn-group"],[1,"input-group","mb-3"],["type","number",1,"form-control",3,"min","max","defaultValue"],["amountProduct",""],["type","button","id","button-addon1",1,"btn","btn-primary","mt-3","mt-sm-3","mt-md-3","mt-lg-0",3,"disabled","click"],[1,"pi","pi-plus","mx-2"],["td","",1,"d-none","d-sm-none","d-md-table-cell"],[1,"text-start"],[1,"d-none","d-sm-none","d-md-table-cell"],["type","number","min","0",1,"form-control",3,"max","defaultValue"],["type","button","id","button-addon1",1,"btn","btn-primary",3,"disabled","click"]],template:function(t,e){if(1&t&&(o.Mb(0,"p-toast"),o.wc(1,le,5,3,"div",0),o.wc(2,pe,10,10,"ng-template",null,1,o.xc)),2&t){const t=o.rc(3);o.Ab(1),o.hc("ngIf",e.showLoading)("ngIfElse",t)}},directives:[mt.a,a.l,K.c,K.d,qt.d,pt.h,qt.c,qt.b,Mt],pipes:[z,a.c],styles:[""]}),t})(),me=(()=>{class t{constructor(t){this.productService=t,this.listProduct=[],this.page=0}ngOnDestroy(){this.getAllProductsWithStockSales$.unsubscribe()}ngOnInit(){this.getProductsDB()}getProductsDB(){this.getAllProductsWithStockSales$=this.productService.getAllProductsWithStockSales().subscribe(t=>{this.listProduct=t.products},t=>{this.showToast("Oh! there was a problem",t,"error")})}showToast(t,e,s,a=2e3){n.a.fire(t,e,s),setInterval(()=>{n.a.close()},a)}}return t.\u0275fac=function(e){return new(e||t)(o.Lb(gt))},t.\u0275cmp=o.Fb({type:t,selectors:[["app-new"]],decls:2,vars:1,consts:[[1,"m-3"],[3,"products"]],template:function(t,e){1&t&&(o.Rb(0,"div",0),o.Mb(1,"app-table-product",1),o.Qb()),2&t&&(o.Ab(1),o.hc("products",e.listProduct))},directives:[ge],styles:[".btn-primary[_ngcontent-%COMP%]:active, .btn-primary[_ngcontent-%COMP%]:hover, .btn-primary[_ngcontent-%COMP%]:visited{background-color:#ffc008;border:#ffc008;color:#212529;transition:background-color .5s ease-out}a[_ngcontent-%COMP%]{text-decoration:none}@media only screen and (max-width:600px){.btn-flotante[_ngcontent-%COMP%]{font-size:14px;padding:12px 20px;bottom:20px;right:20px}}"]}),t})(),fe=(()=>{class t{constructor(t){this.translate=t,this.activeLang="es",this.getLang()}getLang(){const t=localStorage.getItem("lang");this.translate.setDefaultLang(t||this.activeLang)}}return t.\u0275fac=function(e){return new(e||t)(o.Lb(B))},t.\u0275cmp=o.Fb({type:t,selectors:[["app-menu-sale"]],decls:9,vars:6,consts:[["role","group","aria-label","",1,"btn-group"],["type","button","routerLink","history",1,"btn","btn-light-50","mx-1"],[1,"pi","pi-book"],["type","button","routerLink","new",1,"btn","btn-light-50","mx-1"],[1,"pi","pi-plus"]],template:function(t,e){1&t&&(o.Rb(0,"div",0),o.Rb(1,"button",1),o.Mb(2,"i",2),o.yc(3),o.bc(4,"translate"),o.Qb(),o.Rb(5,"button",3),o.Mb(6,"i",4),o.yc(7),o.bc(8,"translate"),o.Qb(),o.Qb()),2&t&&(o.Ab(3),o.Ac(" ",o.cc(4,2,"history")," "),o.Ab(4),o.Ac(" ",o.cc(8,4,"new")," "))},directives:[K.c],pipes:[z],encapsulation:2}),t})();function ye(t,e){if(1&t){const t=o.Sb();o.Rb(0,"div",11),o.Rb(1,"h3",12),o.yc(2,"Total"),o.Qb(),o.Rb(3,"h5"),o.yc(4),o.bc(5,"currency"),o.Qb(),o.Rb(6,"h5"),o.yc(7),o.bc(8,"translate"),o.Qb(),o.Rb(9,"input",13),o.Yb("keyup",function(e){return o.sc(t),o.ac(2).onKey(e)}),o.Qb(),o.Rb(10,"h5",14),o.yc(11),o.bc(12,"translate"),o.bc(13,"currency"),o.Qb(),o.Rb(14,"div",15),o.Rb(15,"button",16),o.Mb(16,"i",17),o.yc(17),o.bc(18,"translate"),o.Qb(),o.Rb(19,"button",18),o.Yb("click",function(){return o.sc(t),o.ac(2).finishPurchase()}),o.Mb(20,"i",19),o.yc(21),o.bc(22,"translate"),o.Qb(),o.Qb(),o.Qb()}if(2&t){const t=o.ac(2);o.Ab(4),o.zc(o.ec(5,8,t.total,"$","symbol","1.0-0")),o.Ab(3),o.Ac("",o.cc(8,13,"payWith")," "),o.Ab(3),o.hc("hidden",t.change<t.total),o.Ab(1),o.Bc(" ",o.cc(12,15,"change"),": ",o.ec(13,17,t.change-t.total,"USD","symbol","1.0-0")," "),o.Ab(6),o.Ac(" ",o.cc(18,22,"modalAddProduct.back")," "),o.Ab(2),o.hc("disabled",t.change<t.total),o.Ab(2),o.Ac(" ",o.cc(22,24,"finishPurchase")," ")}}function ve(t,e){1&t&&(o.Rb(0,"tr"),o.Rb(1,"th"),o.yc(2),o.bc(3,"translate"),o.Qb(),o.Rb(4,"th",20),o.yc(5),o.bc(6,"translate"),o.Qb(),o.Rb(7,"th"),o.yc(8),o.bc(9,"translate"),o.Qb(),o.Rb(10,"th",20),o.yc(11,"SubTotal"),o.Qb(),o.Mb(12,"th"),o.Qb()),2&t&&(o.Ab(2),o.zc(o.cc(3,3,"product ")),o.Ab(3),o.zc(o.cc(6,5,"labelCategory")),o.Ab(3),o.zc(o.cc(9,7,"labelPrice")))}function Re(t,e){if(1&t){const t=o.Sb();o.Rb(0,"tr"),o.Rb(1,"td"),o.yc(2),o.Qb(),o.Rb(3,"td",20),o.yc(4),o.Qb(),o.Rb(5,"td"),o.yc(6),o.Qb(),o.Rb(7,"td",20),o.yc(8),o.Qb(),o.Rb(9,"td"),o.Rb(10,"button",21),o.Yb("click",function(){o.sc(t);const s=e.$implicit;return o.ac(2).deleteProductOfShoppingCart(s.product)}),o.Mb(11,"i",22),o.yc(12),o.bc(13,"translate"),o.Qb(),o.Qb(),o.Qb()}if(2&t){const t=e.$implicit;o.Ab(2),o.Bc(" ",t.amount," ",t.product.name," "),o.Ab(2),o.Ac(" ",t.product.category," "),o.Ab(2),o.zc(t.product.price),o.Ab(2),o.Ac(" ",t.product.price*t.amount," "),o.Ab(4),o.Ac(" ",o.cc(13,6,"tableBtnDelete")," ")}}function Ae(t,e){if(1&t){const t=o.Sb();o.Rb(0,"div",2),o.Rb(1,"div",3),o.Rb(2,"button",4),o.Yb("click",function(){return o.sc(t),o.ac().totalPrice()}),o.Mb(3,"i",5),o.yc(4),o.bc(5,"translate"),o.Qb(),o.wc(6,ye,23,26,"div",6),o.Qb(),o.Rb(7,"div",7),o.Rb(8,"h3"),o.yc(9),o.bc(10,"translate"),o.Qb(),o.Rb(11,"p-table",8),o.wc(12,ve,13,9,"ng-template",9),o.wc(13,Re,14,8,"ng-template",10),o.Qb(),o.Qb(),o.Qb()}if(2&t){const t=o.ac();o.Ab(2),o.hc("disabled",0==t.listProduct.length),o.Ab(2),o.Ac(" ",o.cc(5,5,"calculateTotal")," "),o.Ab(2),o.hc("ngIf",t.HaveProducts),o.Ab(3),o.zc(o.cc(10,7,"shoppingCart")),o.Ab(2),o.hc("value",t.listProduct)}}function Qe(t,e){1&t&&(o.Rb(0,"h3",12),o.yc(1),o.bc(2,"translate"),o.Qb()),2&t&&(o.Ab(1),o.zc(o.cc(2,1,"clearShoppingCart")))}const we=[{path:"sales",component:(()=>{class t{constructor(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Fb({type:t,selectors:[["app-home-sale"]],decls:12,vars:6,consts:[[1,"container-fluid"],[1,"row","flex-nowrap"],[1,"col-auto","col-md-3","col-xl-2","px-sm-2","px-0","bg-primary"],[1,"col","py-3"],[1,"row"],[1,"col-12","mb-1"],["styleClass","p-card-shadow text-lg-start text-sm-center",3,"header","subheader"],[1,"col-sm-12"]],template:function(t,e){1&t&&(o.Rb(0,"div",0),o.Rb(1,"div",1),o.Mb(2,"app-menu-store",2),o.Rb(3,"div",3),o.Rb(4,"div",4),o.Rb(5,"div",5),o.Rb(6,"p-card",6),o.bc(7,"translate"),o.bc(8,"translate"),o.Mb(9,"app-menu-sale"),o.Qb(),o.Qb(),o.Rb(10,"div",7),o.Mb(11,"router-outlet"),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb()),2&t&&(o.Ab(6),o.hc("header",o.cc(7,2,"homeSaleTitle"))("subheader",o.cc(8,4,"homeSaleSubTitle")))},directives:[ut,q.a,fe,K.f],pipes:[z],encapsulation:2}),t})(),children:[{path:"new",component:me},{path:"history",component:ie},{path:"shoppingCart",component:(()=>{class t{constructor(t,e,s,a){this.cartService=t,this.router=e,this.saleService=s,this.translate=a,this.activeLang="es",this.change=0,this.HaveProducts=!1,this.listProduct=[],this.total=0,this.getLang()}ngOnInit(){this.cartService.currentShoppingCart.subscribe(t=>{this.listProduct=t}),this.totalPrice()}getLang(){const t=localStorage.getItem("lang");this.translate.setDefaultLang(t||this.activeLang)}deleteProductOfShoppingCart(t){this.HaveProducts=0!=this.listProduct.length;const e=[...this.listProduct.filter(e=>e.product!==t)];this.listProduct=e,this.totalPrice()}totalPrice(){this.HaveProducts=0!=this.listProduct.length;const t=this.listProduct.map(t=>t.product.price*t.amount);0!=t.length&&(this.total=t.reduce((t,e)=>t+e))}finishPurchase(){this.totalPrice(),this.saleService.saveSale(this.total,this.listProduct).subscribe(t=>{n.a.fire("Saved!","","success"),this.router.navigateByUrl("store/sales/history"),this.cartService.clearShoppingCart()},t=>{this.showToast("Oh! there was a problem",t,"error")})}onKey(t){const{value:e}=t.target;this.change=e}showToast(t,e,s,a=2e3){n.a.fire(t,e,s),setInterval(()=>{n.a.close()},a)}}return t.\u0275fac=function(e){return new(e||t)(o.Lb(oe),o.Lb(K.b),o.Lb(Yt),o.Lb(B))},t.\u0275cmp=o.Fb({type:t,selectors:[["app-shopping-cart"]],decls:3,vars:2,consts:[["class","row",4,"ngIf","ngIfElse"],["messageThereAreNoProducts",""],[1,"row"],[1,"col-sm-12","col-md-12","col-lg-4","mt-4"],[1,"btn","btn-primary","mb-2",3,"disabled","click"],[1,"pi","pi-money-bill","mx-2"],["class","col-sm-12",4,"ngIf"],[1,"col-sm-12","col-md-12","col-lg-8","mt-4"],["responsiveLayout","scroll",3,"value"],["pTemplate","header"],["pTemplate","body"],[1,"col-sm-12"],[1,"mt-3"],["type","number","min","1","id","change","oninput","this.value = Math.abs(this.value)",1,"form-control","mb-4",3,"keyup"],[1,"mb-3",3,"hidden"],[1,"btn-group"],[1,"btn","btn-danger","mt-2"],[1,"pi","pi-chevron-left","mx-2"],[1,"btn","btn-primary","mt-2",3,"disabled","click"],[1,"pi","pi-check-circle","mx-2"],[1,"d-none","d-sm-none","d-md-table-cell"],[1,"btn-danger","btn",3,"click"],[1,"pi","pi-trash"]],template:function(t,e){if(1&t&&(o.wc(0,Ae,14,9,"div",0),o.wc(1,Qe,3,3,"ng-template",null,1,o.xc)),2&t){const t=o.rc(2);o.hc("ngIf",e.listProduct.length>0)("ngIfElse",t)}},directives:[a.l,qt.d,pt.h],pipes:[z,a.c],encapsulation:2}),t})()},{path:"**",redirectTo:"history"}]}];let Le=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.Jb({type:t}),t.\u0275inj=o.Ib({imports:[[K.e.forChild(we)],K.e]}),t})();var Se=s("I5S5");let Pe=(()=>{class t{constructor(t,e,s,a){this.productService=t,this.saleService=e,this.translate=s,this.settingService=a,this.activeLang="es",this.themeLink=document.querySelector("#theme"),this.listProductsName=[],this.countSales=0,this.total=0,this.colors=[""],this.countSalesOnDay=0,this.totalOnDay=0,this.getLang()}getLang(){const t=localStorage.getItem("lang");this.translate.setDefaultLang(t||this.activeLang)}ngOnDestroy(){this.getSalesLastDay$.unsubscribe(),this.getSalesLastDay$.unsubscribe(),this.staticticsSale$.unsubscribe()}ngOnInit(){this.productsUnderStock(),this.staticticsSale(),this.salesLastDay()}productsUnderStock(){var t;const e=null===(t=this.themeLink.getAttribute("href"))||void 0===t?void 0:t.split("/")[4],s=(null==e?void 0:e.split(".")[0])+".json";this.settingService.getColorsTheme(s).subscribe(t=>{this.colors=t}),this.productsUnderStock$=this.productService.productsUnderStock().subscribe(t=>{const{productsName:e,productsPrice:s}=t;this.listProductsName=e,this.dataProductUnderStock={labels:this.listProductsName,datasets:[{data:s,backgroundColor:this.colors,hoverBackgroundColor:"#95A5A6"}]}},t=>{this.showToast("Oh! there was a problem",t,"error")})}salesLastDay(){this.getSalesLastDay$=this.saleService.getSalesLastDay().subscribe(t=>{const{dayForMonth:e,sales:s}=t,a=e.map(t=>{const e=Et(t).startOf("day").fromNow();return e.includes("hours ago")?"1 Day ago":e});this.dataSales={labels:a,datasets:[{label:"N SALES",backgroundColor:this.colors,hoverBackgroundColor:"#95A5A6",data:s}]}},t=>{this.showToast("Oh! there was a problem",t,"error")})}staticticsSale(){this.staticticsSale$=this.saleService.staticticsSale().subscribe(t=>{this.total=t.totalReduce,this.countSales=t.countSales},t=>{this.showToast("Oh! there was a problem",t,"error")}),this.saleService.getListSalesOnDay().subscribe(t=>{this.totalOnDay=t.totalReduce,this.countSalesOnDay=t.countSales},t=>{this.showToast("Oh! there was a problem",t,"error")})}showToast(t,e,s,a=2e3){n.a.fire(t,e,s),setInterval(()=>{n.a.close()},a)}}return t.\u0275fac=function(e){return new(e||t)(o.Lb(gt),o.Lb(Yt),o.Lb(B),o.Lb(V))},t.\u0275cmp=o.Fb({type:t,selectors:[["app-statistics"]],decls:57,vars:44,consts:[["styleClass","p-card-shadow text-lg-start text-sm-center",1,"",3,"header","subheader"],[1,"row","justify-content-center"],[1,"col-12"],[1,"col-sm-12","col-md-6","col-lg-6","col-xl-3","text-center","mt-3","mt-md-0","mb-sm-2","mb-lg-2"],[1,"bg-container","p-2","rounded"],[1,"mt-2"],[1,"pi","pi-arrow-down","ms-2","text-dark","p-1","pe-2",2,"font-size","1.5rem"],[1,"mb-3"],[1,"pi","pi-briefcase","ms-2","text-dark","p-1","pe-2",2,"font-size","1.5rem"],[1,"col-sm-10","col-md-11","col-lg-11","col-xl-6","col-xxl-6","d-none","d-md-block","mb-md-4","mt-md-3"],["type","doughnut",3,"data","options"],[1,"col-sm-10","col-md-11","col-lg-11","col-xl-6","col-xxl-6","align-middle","d-none","d-md-block","mb-md-4","mt-md-3"],["type","bar",3,"data"]],template:function(t,e){1&t&&(o.Rb(0,"p-card",0),o.bc(1,"translate"),o.bc(2,"translate"),o.Rb(3,"div",1),o.Rb(4,"div",2),o.Rb(5,"div",1),o.Rb(6,"div",3),o.Rb(7,"div",4),o.Rb(8,"h2",5),o.Mb(9,"i",6),o.Rb(10,"strong"),o.yc(11),o.bc(12,"translate"),o.Qb(),o.Qb(),o.Rb(13,"h6",7),o.yc(14),o.bc(15,"translate"),o.Qb(),o.Qb(),o.Qb(),o.Rb(16,"div",3),o.Rb(17,"div",4),o.Rb(18,"h2",5),o.Mb(19,"i",8),o.Rb(20,"strong"),o.yc(21),o.bc(22,"currency"),o.Qb(),o.Qb(),o.Rb(23,"h6",7),o.yc(24),o.bc(25,"translate"),o.Qb(),o.Qb(),o.Qb(),o.Rb(26,"div",3),o.Rb(27,"div",4),o.Rb(28,"h2",5),o.Mb(29,"i",6),o.Rb(30,"strong"),o.yc(31),o.Qb(),o.Qb(),o.Rb(32,"h6",7),o.yc(33),o.bc(34,"translate"),o.Qb(),o.Qb(),o.Qb(),o.Rb(35,"div",3),o.Rb(36,"div",4),o.Rb(37,"h2",5),o.Mb(38,"i",6),o.Rb(39,"strong"),o.yc(40),o.bc(41,"currency"),o.Qb(),o.Qb(),o.Rb(42,"h6",7),o.yc(43),o.bc(44,"translate"),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Rb(45,"div",9),o.Rb(46,"h4",5),o.Rb(47,"strong"),o.yc(48),o.bc(49,"translate"),o.Qb(),o.Qb(),o.Mb(50,"p-chart",10),o.Qb(),o.Rb(51,"div",11),o.Rb(52,"h4",5),o.Rb(53,"strong"),o.yc(54),o.bc(55,"translate"),o.Qb(),o.Qb(),o.Mb(56,"p-chart",12),o.Qb(),o.Qb(),o.Qb()),2&t&&(o.hc("header",o.cc(1,16,"home.title"))("subheader",o.cc(2,18,"home.description")),o.Ab(11),o.Bc("",e.countSales," ",o.cc(12,20,"saleTotal.title"),""),o.Ab(3),o.zc(o.cc(15,22,"saleTotal.descripcion")),o.Ab(7),o.Ac("",o.ec(22,24,e.total,"$","symbol","1.0-0")," "),o.Ab(3),o.zc(o.cc(25,29,"sale.totalIncome")),o.Ab(7),o.zc(e.countSalesOnDay),o.Ab(2),o.zc(o.cc(34,31,"saleDay.description")),o.Ab(7),o.Ac("",o.ec(41,33,e.totalOnDay,"$","symbol","1.0-0")," "),o.Ab(3),o.zc(o.cc(44,38,"sale.day")),o.Ab(5),o.zc(o.cc(49,40,"product.UnderStock")),o.Ab(2),o.hc("data",e.dataProductUnderStock)("options",e.optionsUnderStock),o.Ab(4),o.zc(o.cc(55,42,"sale.lastDays")),o.Ab(2),o.hc("data",e.dataSales))},directives:[q.a,Se.b],pipes:[z,a.c],styles:[".bg-container[_ngcontent-%COMP%]{background-color:#eee;color:#474747}"]}),t})(),Ce=(()=>{class t{constructor(t){this.http=t,this._urlBase=E.a.URLBASE}getAllUser(){return this.http.get(`${this._urlBase}/users`)}saveUser(t){return this.http.post(`${this._urlBase}/users`,t)}updateUser(t){return this.http.put(`${this._urlBase}/users/${t.uid}`,t)}deleteUser(t){return this.http.delete(`${this._urlBase}/users/${t.uid}`)}}return t.\u0275fac=function(e){return new(e||t)(o.Vb(Y.b))},t.\u0275prov=o.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function ke(t,e){1&t&&(o.Rb(0,"span",25),o.yc(1),o.bc(2,"translate"),o.Qb()),2&t&&(o.Ab(1),o.Ac(" ",o.cc(2,1,"alertEmail")," "))}function Ie(t,e){1&t&&(o.Rb(0,"span",25),o.yc(1),o.bc(2,"translate"),o.Qb()),2&t&&(o.Ab(1),o.Ac(" ",o.cc(2,1,"alertName")," "))}function xe(t,e){1&t&&(o.Rb(0,"span",25),o.yc(1," The password must be required "),o.Qb())}function Te(t,e){if(1&t&&(o.Rb(0,"option",26),o.yc(1),o.Qb()),2&t){const t=e.$implicit;o.hc("value",t._id),o.Ab(1),o.zc(t.name)}}function Me(t,e){1&t&&(o.Rb(0,"span",25),o.yc(1," The rol must be required "),o.Qb())}let Oe=(()=>{class t{constructor(t,e,s){this.fb=t,this.userService=e,this.translate=s,this.userNew=new o.n,this.userUpdated=new o.n,this.productWasSaved=!1,this.showLoading=!1,this.listRole=[],this.activeLang="es",this.getLang()}getLang(){const t=localStorage.getItem("lang");this.translate.setDefaultLang(t||this.activeLang)}ngOnInit(){this.myFormUser=this.fb.group({uid:[""],email:["",r.o.email],password:["",r.o.required],name:["",r.o.required],rol:["",r.o.required]}),this.listRole=[{name:"ADMIN",_id:"ADMIN_ROLE"},{name:"EMPLOYEE",_id:"EMPLOYEE_ROLE"}]}ngOnChanges(t){var e,s,a,r;void 0!==this.myFormUser&&(this.myFormUser.controls.uid.setValue(null===(e=this.userInput)||void 0===e?void 0:e.uid),this.myFormUser.controls.email.setValue(null===(s=this.userInput)||void 0===s?void 0:s.email),this.myFormUser.controls.name.setValue(null===(a=this.userInput)||void 0===a?void 0:a.name),this.myFormUser.controls.rol.setValue(null===(r=this.userInput)||void 0===r?void 0:r.rol)),t.isNewUser.firstChange||1==this.isNewUser&&this.Restoreform()}fieldIsValid(t){return this.myFormUser.controls[t].errors&&this.myFormUser.controls[t].touched}Restoreform(){this.productWasSaved=!1,this.isNewUser=!0,this.myFormUser.reset()}saveUser(){this.showLoading=!0,this.saveUser$=this.userService.saveUser(this.myFormUser.value).subscribe(t=>{this.Restoreform(),this.showLoading=!1,this.showToast("Success",t.msg,"success"),this.productWasSaved=!0,this.Restoreform(),this.userNew.emit(t.user),this.saveUser$.unsubscribe()},t=>{this.showToast("Oh! Hubo un error",t,"error"),this.showLoading=!1})}updateUser(){this.showLoading=!0,this.updateUser$=this.userService.updateUser(this.myFormUser.value).subscribe(t=>{this.showLoading=!1,this.showToast("Success",t.msg,"success"),this.productWasSaved=!0,this.Restoreform(),this.userUpdated.emit(t.user),this.updateUser$.unsubscribe()},t=>{this.showToast("Oh! there was a problem",t,"error"),this.Restoreform(),this.showLoading=!1})}showToast(t,e,s,a=2e3){n.a.fire(t,e,s),setInterval(()=>{n.a.close()},a)}}return t.\u0275fac=function(e){return new(e||t)(o.Lb(r.b),o.Lb(Ce),o.Lb(B))},t.\u0275cmp=o.Fb({type:t,selectors:[["app-user-add-and-update"]],inputs:{userInput:"userInput",isNewUser:"isNewUser"},outputs:{userNew:"userNew",userUpdated:"userUpdated"},features:[o.zb([pt.f]),o.yb],decls:51,vars:41,consts:[["id","modalUser","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header","mb-3"],["id","staticBackdropLabel",1,"modal-title"],[3,"formGroup","submit"],[1,"modal-body"],[1,"input-group","mb-3",3,"hidden"],[1,"input-group-text"],["type","email","placeholder","Email","aria-label","Email","formControlName","email","aria-describedby","basic-addon1","required","",1,"form-control",3,"hidden"],["class","input-group alert alert-danger mb-3",4,"ngIf"],[1,"input-group","mb-3"],["type","text","placeholder","Name","aria-label","name","formControlName","name","required","",1,"form-control",3,"autocomplete"],["type","password","formControlName","password","autocomplete","false","required","",1,"form-control",3,"hidden"],["formControlName","rol","aria-label","Select Rol","required","",1,"form-select"],[3,"value",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger",3,"click"],[1,"pi","me-2","pi-times"],["type","submit","data-bs-dismiss","modal",1,"btn","btn-primary","float-end",3,"disabled","hidden"],[1,"pi","me-2","pi-save"],[1,"text-center","mt-5","mb-5",3,"hidden"],[1,"mb-3"],["role","status",1,"spinner-border","text-secondary"],[1,"visually-hidden"],[1,"input-group","alert","alert-danger","mb-3"],[3,"value"]],template:function(t,e){1&t&&(o.Rb(0,"div",0),o.Rb(1,"div",1),o.Rb(2,"div",2),o.Rb(3,"div",3),o.Rb(4,"h5",4),o.yc(5),o.bc(6,"translate"),o.Qb(),o.Qb(),o.Rb(7,"form",5),o.Yb("submit",function(){return 1==e.isNewUser?e.saveUser():e.updateUser()}),o.Rb(8,"div",6),o.Rb(9,"div",7),o.Rb(10,"span",8),o.yc(11),o.bc(12,"translate"),o.Qb(),o.Mb(13,"input",9),o.Qb(),o.wc(14,ke,3,3,"span",10),o.Rb(15,"div",11),o.Rb(16,"span",8),o.yc(17),o.bc(18,"translate"),o.Qb(),o.Mb(19,"input",12),o.Qb(),o.wc(20,Ie,3,3,"span",10),o.Rb(21,"div",7),o.Rb(22,"span",8),o.yc(23),o.bc(24,"translate"),o.Qb(),o.Mb(25,"input",13),o.Qb(),o.wc(26,xe,2,0,"span",10),o.Rb(27,"div",11),o.Rb(28,"span",8),o.yc(29),o.bc(30,"translate"),o.Qb(),o.Rb(31,"select",14),o.wc(32,Te,2,2,"option",15),o.Qb(),o.Qb(),o.wc(33,Me,2,0,"span",10),o.Qb(),o.Rb(34,"div",16),o.Rb(35,"button",17),o.Yb("click",function(){return e.Restoreform()}),o.Mb(36,"i",18),o.yc(37),o.bc(38,"translate"),o.Qb(),o.Rb(39,"button",19),o.Mb(40,"i",20),o.yc(41),o.bc(42,"translate"),o.Qb(),o.Qb(),o.Rb(43,"div",21),o.Rb(44,"h3",22),o.yc(45),o.bc(46,"translate"),o.Qb(),o.Rb(47,"div",23),o.Rb(48,"span",24),o.yc(49),o.bc(50,"translate"),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb()),2&t&&(o.Ab(5),o.Ac(" ",o.cc(6,23,1==e.isNewUser?"buttonNewUser.title":"buttonUpdateUser.title")," "),o.Ab(2),o.hc("formGroup",e.myFormUser),o.Ab(2),o.hc("hidden",!0!==e.isNewUser),o.Ab(2),o.Ac("* ",o.cc(12,25,"email"),""),o.Ab(2),o.hc("hidden",!0!==e.isNewUser),o.Ab(1),o.hc("ngIf",e.fieldIsValid("email")),o.Ab(3),o.Ac("* ",o.cc(18,27,"table.name"),""),o.Ab(2),o.hc("autocomplete",!1),o.Ab(1),o.hc("ngIf",e.fieldIsValid("name")),o.Ab(1),o.hc("hidden",!0!==e.isNewUser),o.Ab(2),o.Ac("* ",o.cc(24,29,"password"),""),o.Ab(2),o.hc("hidden",!0!==e.isNewUser),o.Ab(1),o.hc("ngIf",e.fieldIsValid("password")),o.Ab(3),o.Ac("* ",o.cc(30,31,"rol"),""),o.Ab(3),o.hc("ngForOf",e.listRole),o.Ab(1),o.hc("ngIf",e.fieldIsValid("rol")),o.Ab(4),o.Ac(" ",o.cc(38,33,"btnClose")," "),o.Ab(2),o.hc("disabled",e.myFormUser.invalid||e.showLoading)("hidden",e.productWasSaved),o.Ab(2),o.Ac(" ",o.cc(42,35,"btnSaveUser")," "),o.Ab(2),o.hc("hidden",!e.showLoading),o.Ab(2),o.zc(o.cc(46,37,"loading")),o.Ab(4),o.zc(o.cc(50,39,"loading")))},directives:[r.p,r.h,r.d,r.a,r.g,r.c,r.m,a.l,r.n,a.k,r.j,r.q],pipes:[z],styles:[".form-control[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus {\n      border-color: #FFCA2B !important;\n      box-shadow: 0 0 0 0.2rem rgb(255, 202, 43, 0.25) !important;\n}"]}),t})(),De=(()=>{class t{constructor(t,e){this.userService=t,this.translate=e,this.userDelete=new o.n,this.showLoading=!1,this.activeLang="es",this.getLang()}getLang(){const t=localStorage.getItem("lang");this.translate.setDefaultLang(t||this.activeLang)}deleteUser(){this.showLoading=!0,this.deleteUser$=this.userService.deleteUser(this.userDeleted).subscribe(t=>{this.showToast("Success","It was correctly eliminated","success",3e3),this.userDelete.emit(t.user),this.showLoading=!1,this.deleteUser$.unsubscribe()},t=>{this.showToast("Error",t.message,"error"),this.showLoading=!1})}showToast(t,e,s,a=2e3){n.a.fire(t,e,s),setInterval(()=>{n.a.close()},a)}}return t.\u0275fac=function(e){return new(e||t)(o.Lb(Ce),o.Lb(B))},t.\u0275cmp=o.Fb({type:t,selectors:[["app-modal-delete-user"]],inputs:{userDeleted:"userDeleted"},outputs:{userDelete:"userDelete"},decls:37,vars:23,consts:[["id","modalDeleteUser","tabindex","-1","aria-labelledby","modalDeleteProduct","aria-hidden","true","data-bs-backdrop","static",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-9"],[1,"col-sm-12","mt-3"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger"],[1,"pi","me-2","pi-times"],["type","button","data-bs-dismiss","modal",1,"btn","btn-primary","float-end",3,"click"],[1,"pi","me-2","pi-trash"],["hidden","showLoading",1,"text-center","mt-5","mb-5"],[1,"mb-3"],["role","status",1,"spinner-border","text-secondary"],[1,"visually-hidden"]],template:function(t,e){1&t&&(o.Rb(0,"div",0),o.Rb(1,"div",1),o.Rb(2,"div",2),o.Rb(3,"div",3),o.Rb(4,"h5",4),o.yc(5),o.bc(6,"translate"),o.Qb(),o.Qb(),o.Rb(7,"div",5),o.Rb(8,"dl",6),o.Rb(9,"dt",7),o.yc(10),o.bc(11,"translate"),o.Qb(),o.Rb(12,"dd",8),o.yc(13),o.Qb(),o.Rb(14,"dt",7),o.yc(15),o.bc(16,"translate"),o.Qb(),o.Rb(17,"dd",8),o.Rb(18,"p"),o.yc(19),o.Qb(),o.Qb(),o.Rb(20,"div",9),o.Rb(21,"button",10),o.Mb(22,"i",11),o.yc(23),o.bc(24,"translate"),o.Qb(),o.Rb(25,"button",12),o.Yb("click",function(){return e.deleteUser()}),o.Mb(26,"i",13),o.yc(27),o.bc(28,"translate"),o.Qb(),o.Qb(),o.Qb(),o.Rb(29,"div",14),o.Rb(30,"h3",15),o.yc(31),o.bc(32,"translate"),o.Qb(),o.Rb(33,"div",16),o.Rb(34,"span",17),o.yc(35),o.bc(36,"translate"),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb()),2&t&&(o.Ab(5),o.Ac(" ",o.cc(6,9,"modalDeleteUser.title")," "),o.Ab(5),o.Ac("",o.cc(11,11,"labelName"),":"),o.Ab(3),o.Ac(" ",e.userDeleted.name,""),o.Ab(2),o.Ac("",o.cc(16,13,"email"),":"),o.Ab(4),o.Ac("",e.userDeleted.email," "),o.Ab(4),o.Ac(" ",o.cc(24,15,"modalDelete.back")," "),o.Ab(4),o.Ac(" ",o.cc(28,17,"modalDeleteUser.title")," "),o.Ab(4),o.zc(o.cc(32,19,"loading")),o.Ab(4),o.zc(o.cc(36,21,"loading")))},pipes:[z],encapsulation:2}),t})();function Fe(t,e){1&t&&(o.Rb(0,"div",3),o.Rb(1,"strong"),o.yc(2),o.bc(3,"translate"),o.Qb(),o.Mb(4,"div",4),o.Qb()),2&t&&(o.Ab(2),o.zc(o.cc(3,1,"loading")))}function Ue(t,e){if(1&t){const t=o.Sb();o.Rb(0,"tr"),o.Rb(1,"td"),o.Rb(2,"div",13),o.Rb(3,"div",14),o.Rb(4,"div",15),o.yc(5),o.bc(6,"titlecase"),o.Qb(),o.yc(7),o.Rb(8,"span",16),o.yc(9),o.bc(10,"rol"),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Rb(11,"td"),o.Rb(12,"div",17),o.Rb(13,"button",18),o.Yb("click",function(){o.sc(t);const s=e.$implicit;return o.ac(2).selectedUser(!1,s)}),o.Mb(14,"i",19),o.yc(15),o.bc(16,"translate"),o.Qb(),o.Rb(17,"button",20),o.Yb("click",function(){o.sc(t);const s=e.$implicit;return o.ac(2).selectedUser(!1,s)}),o.Mb(18,"i",21),o.yc(19),o.bc(20,"translate"),o.Qb(),o.Qb(),o.Qb(),o.Qb()}if(2&t){const t=e.$implicit;o.Ab(5),o.Ac(" ",o.cc(6,5,t.name)," "),o.Ab(2),o.Ac(" ",t.email," "),o.Ab(2),o.Ac(" ",o.cc(10,7,t.rol)," "),o.Ab(6),o.Ac(" ",o.cc(16,9,"tableBtnEdit")," "),o.Ab(4),o.Ac(" ",o.cc(20,11,"tableBtnDelete")," ")}}function Ne(t,e){if(1&t){const t=o.Sb();o.Rb(0,"div"),o.Rb(1,"button",5),o.Yb("click",function(){return o.sc(t),o.ac().selectedUser(!0)}),o.Mb(2,"i",6),o.yc(3),o.bc(4,"translate"),o.Qb(),o.Rb(5,"div",7),o.Rb(6,"table",8),o.Rb(7,"thead"),o.Rb(8,"tr"),o.Rb(9,"th",9),o.yc(10),o.bc(11,"translate"),o.Qb(),o.Rb(12,"th",9),o.yc(13),o.bc(14,"translate"),o.Qb(),o.Qb(),o.Qb(),o.Rb(15,"tbody"),o.wc(16,Ue,21,13,"tr",10),o.Qb(),o.Qb(),o.Qb(),o.Rb(17,"app-user-add-and-update",11),o.Yb("userNew",function(e){return o.sc(t),o.ac().addToUsersList(e)})("userUpdated",function(e){return o.sc(t),o.ac().addToUserListUpdated(e)}),o.Qb(),o.Rb(18,"app-modal-delete-user",12),o.Yb("userDelete",function(e){return o.sc(t),o.ac().deleteListUser(e)}),o.Qb(),o.Qb()}if(2&t){const t=o.ac();o.Ab(3),o.Ac(" ",o.cc(4,7,"buttonNewUser.title")," "),o.Ab(7),o.zc(o.cc(11,9,"User")),o.Ab(3),o.zc(o.cc(14,11,"table.action")),o.Ab(3),o.hc("ngForOf",t.listUsers),o.Ab(1),o.hc("userInput",t.userSelected)("isNewUser",t.isNewUser),o.Ab(1),o.hc("userDeleted",t.userSelected)}}function $e(t,e){1&t&&(o.Rb(0,"div",23),o.yc(1," No Users were found! "),o.Qb())}function _e(t,e){if(1&t&&o.wc(0,$e,2,0,"div",22),2&t){const t=o.ac();o.hc("ngIf",0==t.showLoading)}}let Be=(()=>{class t{constructor(t,e,s){this.userService=t,this.messageService=e,this.translate=s,this.listUsers=[],this.showLoading=!0,this.isNewUser=!0,this.activeLang="es",this.getLang()}getLang(){const t=localStorage.getItem("lang");this.translate.setDefaultLang(t||this.activeLang)}ngOnDestroy(){this.updateUser$.unsubscribe()}ngOnInit(){this.userSelected={email:"",rol:"",name:"",state:!0},this.showLoading=!0,this.updateUser$=this.userService.getAllUser().subscribe(t=>{this.listUsers=t.users,this.showLoading=!1},t=>{this.showLoading=!1,this.showToast("Oh! there was a problem",t,"error")})}addToUsersList(t){this.listUsers.push(t)}deleteListUser(t){this.listUsers=this.listUsers.filter(e=>e.uid!==t.uid)}addToUserListUpdated(t){const e=this.listUsers.findIndex(e=>e.uid==t.uid);let s=[...this.listUsers];s[e]=Object.assign(Object.assign({},s[e]),{name:t.name,email:t.email,rol:t.rol,state:t.state,password:t.password,uid:t.uid}),this.listUsers=s}selectedUser(t,e){0==t?void 0!==e&&(this.userSelected=e,this.isNewUser=t):this.isNewUser=t}showToast(t,e,s,a=2e3){n.a.fire(t,e,s),setInterval(()=>{n.a.close()},a)}}return t.\u0275fac=function(e){return new(e||t)(o.Lb(Ce),o.Lb(pt.f),o.Lb(B))},t.\u0275cmp=o.Fb({type:t,selectors:[["app-users-list"]],features:[o.zb([pt.f])],decls:5,vars:3,consts:[["class","d-flex align-items-center p-3",4,"ngIf"],[4,"ngIf","ngIfElse"],["messageThereAreNoProducts",""],[1,"d-flex","align-items-center","p-3"],["role","status","aria-hidden","true",1,"spinner-border","ms-auto","text-secondary"],["label","New category","data-bs-target","#modalUser","data-bs-toggle","modal",1,"mb-4","btn","btn-primary",3,"click"],[1,"pi","me-2","pi-plus"],[1,"table-responsive"],[1,"table","table-sm","table-hover","align-middle"],["scope","col"],[4,"ngFor","ngForOf"],[3,"userInput","isNewUser","userNew","userUpdated"],[3,"userDeleted","userDelete"],[1,"row","justify-content-sm-start","justify-content-md-start"],[1,"col-sm-2","col-md-2","text-cemter"],[1,"fw-bold","mt-2"],[1,"badge","bg-primary","mt-1","mb-2"],[1,"d-grid","gap-3","d-md-block"],["data-bs-target","#modalUser","data-bs-toggle","modal",1,"btn","btn-primary","mx-md-1","mb-2","mb-sm-2","mx-sm-2","mx-2","me-sm-4",3,"click"],[1,"pi","me-2","pi-pencil"],["data-bs-target","#modalDeleteUser","data-bs-toggle","modal",1,"btn","btn-danger","mx-md-1","mb-2","mb-sm-2","mx-sm-2","mx-2","me-sm-4",3,"click"],[1,"pi","me-2","pi-trash"],["class","alert alert-danger","role","alert",4,"ngIf"],["role","alert",1,"alert","alert-danger"]],template:function(t,e){if(1&t&&(o.wc(0,Fe,5,3,"div",0),o.Mb(1,"p-toast"),o.wc(2,Ne,19,13,"div",1),o.wc(3,_e,1,1,"ng-template",null,2,o.xc)),2&t){const t=o.rc(4);o.hc("ngIf",e.showLoading),o.Ab(2),o.hc("ngIf",0!==e.listUsers.length)("ngIfElse",t)}},directives:[a.l,mt.a,a.k,Oe,De],pipes:[z,a.t,bt],encapsulation:2}),t})(),ze=(()=>{class t{constructor(t){this.translate=t,this.activeLang="es",this.getLang()}getLang(){const t=localStorage.getItem("lang");this.translate.setDefaultLang(t||this.activeLang)}}return t.\u0275fac=function(e){return new(e||t)(o.Lb(B))},t.\u0275cmp=o.Fb({type:t,selectors:[["app-list-user"]],decls:7,vars:9,consts:[["styleClass","p-card-shadow text-lg-start text-sm-center mb-4",3,"header","subheader"]],template:function(t,e){1&t&&(o.Rb(0,"p-card",0),o.bc(1,"translate"),o.bc(2,"translate"),o.Rb(3,"p"),o.yc(4),o.bc(5,"translate"),o.Qb(),o.Qb(),o.Mb(6,"app-users-list")),2&t&&(o.hc("header",o.cc(1,3,"listUser.title"))("subheader",o.cc(2,5,"listUser.subTitle")),o.Ab(4),o.Ac(" ",o.cc(5,7,"listUser.description")," "))},directives:[q.a,Be],pipes:[z],encapsulation:2}),t})();const je=[{path:"users",component:(()=>{class t{constructor(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Fb({type:t,selectors:[["app-home-users"]],decls:7,vars:0,consts:[[1,"container-fluid"],[1,"row","flex-nowrap"],[1,"col-auto","col-md-3","col-xl-2","px-sm-2","px-0","bg-primary"],[1,"col","py-3"],[1,"row"],[1,"col-sm-12"]],template:function(t,e){1&t&&(o.Rb(0,"div",0),o.Rb(1,"div",1),o.Mb(2,"app-menu-store",2),o.Rb(3,"div",3),o.Rb(4,"div",4),o.Rb(5,"div",5),o.Mb(6,"router-outlet"),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb())},directives:[ut,K.f],encapsulation:2}),t})(),children:[{path:"listUser",component:ze}],canLoad:[G],canActivate:[G]}];let Ee=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.Jb({type:t}),t.\u0275inj=o.Ib({imports:[[K.e.forChild(je)],K.e]}),t})();const Ye=[{path:"",component:ht,children:[{path:"products",component:jt},{path:"categories",component:lt},{path:"settings",component:H},{path:"home",component:Pe,canLoad:[G],canActivate:[G]},{path:"**",redirectTo:"home"}]}];let Ve=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.Jb({type:t}),t.\u0275inj=o.Ib({imports:[[K.e.forChild(Ye),Le,Ee],K.e]}),t})();class qe{constructor(t,e="/assets/i18n/",s=".json"){this.http=t,this.prefix=e,this.suffix=s}getTranslation(t){return this.http.get(`${this.prefix}${t}${this.suffix}`)}}let He=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.Jb({type:t}),t.\u0275inj=o.Ib({imports:[[a.b,r.l,c.a,j.forRoot({loader:{provide:Q,useFactory:t=>new qe(t),deps:[Y.b]}})]]}),t})(),Ke=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.Jb({type:t}),t.\u0275inj=o.Ib({imports:[[a.b,K.e,He,j.forRoot({loader:{provide:Q,useFactory:t=>new qe(t),deps:[Y.b]}})]]}),t})();var We=s("FUS3");let Ge=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.Jb({type:t}),t.\u0275inj=o.Ib({imports:[[a.b,c.a,r.e,K.e,j.forRoot({loader:{provide:Q,useFactory:t=>new qe(t),deps:[Y.b]}}),We.a]]}),t})(),Je=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.Jb({type:t}),t.\u0275inj=o.Ib({imports:[[a.b,r.l,c.a,r.e,Ge,K.e,j.forRoot({loader:{provide:Q,useFactory:t=>new qe(t),deps:[Y.b]}}),We.a]]}),t})(),Xe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.Jb({type:t}),t.\u0275inj=o.Ib({imports:[[a.b,r.l,j.forRoot({loader:{provide:Q,useFactory:t=>new qe(t),deps:[Y.b]}})]]}),t})(),Ze=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.Jb({type:t}),t.\u0275inj=o.Ib({imports:[[a.b,j.forRoot({loader:{provide:Q,useFactory:t=>new qe(t),deps:[Y.b]}})],Xe,Je,Ge,He,Ke]}),t})(),ts=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.Jb({type:t}),t.\u0275inj=o.Ib({imports:[[a.b,Ze,K.e,c.a,r.e,j.forRoot({loader:{provide:Q,useFactory:t=>new qe(t),deps:[Y.b]}})]]}),t})(),es=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.Jb({type:t}),t.\u0275inj=o.Ib({imports:[[a.b,r.l,Ve,c.a,Ze,ts]]}),t})()}}]);